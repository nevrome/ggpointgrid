// Generated by Futhark 0.22.0
// git: 65ba7c2 (Thu Jan 20 18:22:15 2022 +0100)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_i32_1d;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const
                                          int32_t *data, int64_t dim0);
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0);
int futhark_free_i32_1d(struct futhark_context *ctx,
                        struct futhark_i32_1d *arr);
int futhark_values_i32_1d(struct futhark_context *ctx,
                          struct futhark_i32_1d *arr, int32_t *data);
unsigned char *futhark_values_raw_i32_1d(struct futhark_context *ctx,
                                         struct futhark_i32_1d *arr);
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx,
                                    struct futhark_i32_1d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_i32_1d **out0,
                       struct futhark_i32_1d **out1,
                       struct futhark_i32_1d **out2, const
                       struct futhark_i32_1d *in0, const
                       struct futhark_i32_1d *in1, const
                       struct futhark_i32_1d *in2);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_17294,
                             struct memblock *mem_out_p_17295,
                             struct memblock *mem_out_p_17296,
                             int64_t *out_prim_out_17297,
                             struct memblock gridIds_mem_16056,
                             struct memblock pointIds_mem_16057,
                             struct memblock distances_mem_16058,
                             int64_t n_15021);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_i32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const
                                          int32_t *data, int64_t dim0)
{
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr =
                          (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0)
{
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr =
                          (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_1d(struct futhark_context *ctx,
                          struct futhark_i32_1d *arr, int32_t *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_i32_1d(struct futhark_context *ctx,
                                         struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx,
                                    struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_17294,
                             struct memblock *mem_out_p_17295,
                             struct memblock *mem_out_p_17296,
                             int64_t *out_prim_out_17297,
                             struct memblock gridIds_mem_16056,
                             struct memblock pointIds_mem_16057,
                             struct memblock distances_mem_16058,
                             int64_t n_15021)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_16126_cached_sizze_17298 = 0;
    unsigned char *mem_16126 = NULL;
    size_t mem_16129_cached_sizze_17299 = 0;
    unsigned char *mem_16129 = NULL;
    size_t mem_16132_cached_sizze_17300 = 0;
    unsigned char *mem_16132 = NULL;
    size_t mem_16135_cached_sizze_17301 = 0;
    unsigned char *mem_16135 = NULL;
    size_t mem_16138_cached_sizze_17302 = 0;
    unsigned char *mem_16138 = NULL;
    size_t mem_16241_cached_sizze_17303 = 0;
    unsigned char *mem_16241 = NULL;
    size_t mem_16264_cached_sizze_17304 = 0;
    unsigned char *mem_16264 = NULL;
    size_t mem_16267_cached_sizze_17305 = 0;
    unsigned char *mem_16267 = NULL;
    size_t mem_16270_cached_sizze_17306 = 0;
    unsigned char *mem_16270 = NULL;
    size_t mem_16297_cached_sizze_17307 = 0;
    unsigned char *mem_16297 = NULL;
    size_t mem_16322_cached_sizze_17308 = 0;
    unsigned char *mem_16322 = NULL;
    size_t mem_16342_cached_sizze_17309 = 0;
    unsigned char *mem_16342 = NULL;
    size_t mem_16345_cached_sizze_17310 = 0;
    unsigned char *mem_16345 = NULL;
    size_t mem_16372_cached_sizze_17311 = 0;
    unsigned char *mem_16372 = NULL;
    size_t mem_16387_cached_sizze_17312 = 0;
    unsigned char *mem_16387 = NULL;
    size_t mem_16402_cached_sizze_17313 = 0;
    unsigned char *mem_16402 = NULL;
    size_t mem_16405_cached_sizze_17314 = 0;
    unsigned char *mem_16405 = NULL;
    size_t mem_16432_cached_sizze_17315 = 0;
    unsigned char *mem_16432 = NULL;
    size_t mem_16472_cached_sizze_17316 = 0;
    unsigned char *mem_16472 = NULL;
    size_t mem_16475_cached_sizze_17317 = 0;
    unsigned char *mem_16475 = NULL;
    size_t mem_16478_cached_sizze_17318 = 0;
    unsigned char *mem_16478 = NULL;
    size_t mem_16481_cached_sizze_17319 = 0;
    unsigned char *mem_16481 = NULL;
    size_t mem_16484_cached_sizze_17320 = 0;
    unsigned char *mem_16484 = NULL;
    size_t mem_16587_cached_sizze_17321 = 0;
    unsigned char *mem_16587 = NULL;
    size_t mem_16590_cached_sizze_17322 = 0;
    unsigned char *mem_16590 = NULL;
    size_t mem_16593_cached_sizze_17323 = 0;
    unsigned char *mem_16593 = NULL;
    size_t mem_16632_cached_sizze_17324 = 0;
    unsigned char *mem_16632 = NULL;
    size_t mem_16635_cached_sizze_17325 = 0;
    unsigned char *mem_16635 = NULL;
    size_t mem_16662_cached_sizze_17326 = 0;
    unsigned char *mem_16662 = NULL;
    size_t mem_16685_cached_sizze_17327 = 0;
    unsigned char *mem_16685 = NULL;
    size_t mem_16688_cached_sizze_17328 = 0;
    unsigned char *mem_16688 = NULL;
    size_t mem_16691_cached_sizze_17329 = 0;
    unsigned char *mem_16691 = NULL;
    size_t mem_16718_cached_sizze_17330 = 0;
    unsigned char *mem_16718 = NULL;
    size_t mem_16743_cached_sizze_17331 = 0;
    unsigned char *mem_16743 = NULL;
    size_t mem_16746_cached_sizze_17332 = 0;
    unsigned char *mem_16746 = NULL;
    size_t mem_16773_cached_sizze_17333 = 0;
    unsigned char *mem_16773 = NULL;
    size_t mem_16776_cached_sizze_17334 = 0;
    unsigned char *mem_16776 = NULL;
    size_t mem_16779_cached_sizze_17335 = 0;
    unsigned char *mem_16779 = NULL;
    size_t mem_16818_cached_sizze_17336 = 0;
    unsigned char *mem_16818 = NULL;
    size_t mem_16821_cached_sizze_17337 = 0;
    unsigned char *mem_16821 = NULL;
    size_t mem_16848_cached_sizze_17338 = 0;
    unsigned char *mem_16848 = NULL;
    size_t mem_16851_cached_sizze_17339 = 0;
    unsigned char *mem_16851 = NULL;
    size_t mem_16854_cached_sizze_17340 = 0;
    unsigned char *mem_16854 = NULL;
    size_t mem_16893_cached_sizze_17341 = 0;
    unsigned char *mem_16893 = NULL;
    size_t mem_16896_cached_sizze_17342 = 0;
    unsigned char *mem_16896 = NULL;
    size_t mem_16899_cached_sizze_17343 = 0;
    unsigned char *mem_16899 = NULL;
    size_t mem_16923_cached_sizze_17344 = 0;
    unsigned char *mem_16923 = NULL;
    size_t mem_16926_cached_sizze_17345 = 0;
    unsigned char *mem_16926 = NULL;
    size_t mem_16953_cached_sizze_17346 = 0;
    unsigned char *mem_16953 = NULL;
    size_t mem_16968_cached_sizze_17347 = 0;
    unsigned char *mem_16968 = NULL;
    size_t mem_17007_cached_sizze_17348 = 0;
    unsigned char *mem_17007 = NULL;
    size_t mem_17010_cached_sizze_17349 = 0;
    unsigned char *mem_17010 = NULL;
    struct memblock mem_out_17151;
    
    mem_out_17151.references = NULL;
    
    struct memblock mem_out_17152;
    
    mem_out_17152.references = NULL;
    
    struct memblock mem_out_17153;
    
    mem_out_17153.references = NULL;
    
    int64_t prim_out_17154;
    struct memblock mem_16060;
    
    mem_16060.references = NULL;
    if (memblock_alloc(ctx, &mem_16060, (int64_t) 0, "mem_16060")) {
        err = 1;
        goto cleanup;
    }
    
    bool loop_cond_15026 = slt64((int64_t) 0, n_15021);
    
    if (mem_16264_cached_sizze_17304 < (size_t) (int64_t) 4) {
        mem_16264 = realloc(mem_16264, (int64_t) 4);
        mem_16264_cached_sizze_17304 = (int64_t) 4;
    }
    if (mem_16685_cached_sizze_17327 < (size_t) (int64_t) 4) {
        mem_16685 = realloc(mem_16685, (int64_t) 4);
        mem_16685_cached_sizze_17327 = (int64_t) 4;
    }
    
    int64_t ext_17115;
    int64_t ext_17112;
    int64_t ext_17111;
    int64_t ext_17108;
    int64_t ext_17107;
    int64_t ext_17104;
    int64_t ext_17103;
    int64_t ext_17100;
    int64_t ext_17099;
    int64_t ext_17096;
    int64_t ext_17095;
    int64_t ext_17092;
    struct memblock ext_mem_17091;
    
    ext_mem_17091.references = NULL;
    
    struct memblock ext_mem_17090;
    
    ext_mem_17090.references = NULL;
    
    struct memblock ext_mem_17089;
    
    ext_mem_17089.references = NULL;
    
    struct memblock ext_mem_17088;
    
    ext_mem_17088.references = NULL;
    
    struct memblock ext_mem_17087;
    
    ext_mem_17087.references = NULL;
    
    struct memblock ext_mem_17086;
    
    ext_mem_17086.references = NULL;
    
    int64_t output_15027;
    int64_t output_15028;
    bool output_15029;
    int64_t loopz2083U_15036;
    int64_t loopz2084U_15037;
    bool loop_while_15038;
    int64_t ctx_param_ext_16061;
    int64_t ctx_param_ext_16064;
    struct memblock mem_param_16065;
    
    mem_param_16065.references = NULL;
    
    int64_t ctx_param_ext_16066;
    int64_t ctx_param_ext_16069;
    struct memblock mem_param_16070;
    
    mem_param_16070.references = NULL;
    
    int64_t ctx_param_ext_16071;
    int64_t ctx_param_ext_16074;
    struct memblock mem_param_16075;
    
    mem_param_16075.references = NULL;
    
    int64_t ctx_param_ext_16076;
    int64_t ctx_param_ext_16079;
    struct memblock mem_param_16080;
    
    mem_param_16080.references = NULL;
    
    int64_t ctx_param_ext_16081;
    int64_t ctx_param_ext_16084;
    struct memblock mem_param_16085;
    
    mem_param_16085.references = NULL;
    
    int64_t ctx_param_ext_16086;
    int64_t ctx_param_ext_16089;
    struct memblock mem_param_16090;
    
    mem_param_16090.references = NULL;
    ctx_param_ext_16061 = n_15021;
    ctx_param_ext_16064 = n_15021;
    ctx_param_ext_16066 = n_15021;
    ctx_param_ext_16069 = n_15021;
    ctx_param_ext_16071 = n_15021;
    ctx_param_ext_16074 = n_15021;
    ctx_param_ext_16076 = (int64_t) 0;
    ctx_param_ext_16079 = (int64_t) 0;
    ctx_param_ext_16081 = (int64_t) 0;
    ctx_param_ext_16084 = (int64_t) 0;
    ctx_param_ext_16086 = (int64_t) 0;
    ctx_param_ext_16089 = (int64_t) 0;
    if (memblock_set(ctx, &mem_param_16065, &gridIds_mem_16056,
                     "gridIds_mem_16056") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_16070, &pointIds_mem_16057,
                     "pointIds_mem_16057") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_16075, &distances_mem_16058,
                     "distances_mem_16058") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_16080, &mem_16060, "mem_16060") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_16085, &mem_16060, "mem_16060") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_16090, &mem_16060, "mem_16060") != 0)
        return 1;
    loopz2083U_15036 = n_15021;
    loopz2084U_15037 = (int64_t) 0;
    loop_while_15038 = loop_cond_15026;
    while (loop_while_15038) {
        int64_t binop_y_16109 = (int64_t) 8 * loopz2083U_15036;
        int64_t bytes_16110 = smax64((int64_t) 0, binop_y_16109);
        struct memblock mem_16111;
        
        mem_16111.references = NULL;
        if (memblock_alloc(ctx, &mem_16111, bytes_16110, "mem_16111")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_17182 = 0; i_17182 < loopz2083U_15036; i_17182++) {
            int64_t x_17183 = (int64_t) 0 + i_17182 * (int64_t) 1;
            
            ((int64_t *) mem_16111.mem)[i_17182] = x_17183;
        }
        
        bool cond_15046 = loopz2083U_15036 == (int64_t) 0;
        int32_t iters_15047;
        
        if (cond_15046) {
            iters_15047 = 0;
        } else {
            iters_15047 = 16;
        }
        
        bool loop_nonempty_15048 = slt32(0, iters_15047);
        int64_t i_15049 = sub64(loopz2083U_15036, (int64_t) 1);
        bool x_15050 = sle64((int64_t) 0, i_15049);
        bool y_15051 = slt64(i_15049, loopz2083U_15036);
        bool bounds_check_15052 = x_15050 && y_15051;
        bool loop_not_taken_15053 = !loop_nonempty_15048;
        bool protect_assert_disj_15054 = bounds_check_15052 ||
             loop_not_taken_15053;
        bool index_certs_15055;
        
        if (!protect_assert_disj_15054) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) i_15049,
                                   "] out of bounds for array of shape [",
                                   (long long) loopz2083U_15036, "].",
                                   "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:104:6-36\n   #4  /prelude/functional.fut:9:42-44\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-61:47\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:110:3-57\n   #7  /prelude/functional.fut:9:42-44\n   #8  arrange.fut:6:5-7:60\n   #9  arrange.fut:40:27-50\n   #10 arrange.fut:50:25-84\n   #11 arrange.fut:68:5-50\n   #12 arrange.fut:67:1-68:60\n");
            if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        if (mem_16126_cached_sizze_17298 < (size_t) bytes_16110) {
            mem_16126 = realloc(mem_16126, bytes_16110);
            mem_16126_cached_sizze_17298 = bytes_16110;
        }
        if (mem_16129_cached_sizze_17299 < (size_t) bytes_16110) {
            mem_16129 = realloc(mem_16129, bytes_16110);
            mem_16129_cached_sizze_17299 = bytes_16110;
        }
        if (mem_16132_cached_sizze_17300 < (size_t) bytes_16110) {
            mem_16132 = realloc(mem_16132, bytes_16110);
            mem_16132_cached_sizze_17300 = bytes_16110;
        }
        if (mem_16135_cached_sizze_17301 < (size_t) bytes_16110) {
            mem_16135 = realloc(mem_16135, bytes_16110);
            mem_16135_cached_sizze_17301 = bytes_16110;
        }
        
        int64_t binop_y_16136 = (int64_t) 4 * loopz2083U_15036;
        int64_t bytes_16137 = smax64((int64_t) 0, binop_y_16136);
        
        if (mem_16138_cached_sizze_17302 < (size_t) bytes_16137) {
            mem_16138 = realloc(mem_16138, bytes_16137);
            mem_16138_cached_sizze_17302 = bytes_16137;
        }
        
        int64_t ext_16238;
        int64_t ext_16235;
        struct memblock ext_mem_16230;
        
        ext_mem_16230.references = NULL;
        
        struct memblock ext_mem_16229;
        
        ext_mem_16229.references = NULL;
        
        int64_t ctx_param_ext_16112;
        int64_t ctx_param_ext_16115;
        struct memblock mem_param_16116;
        
        mem_param_16116.references = NULL;
        
        struct memblock mem_param_16121;
        
        mem_param_16121.references = NULL;
        ctx_param_ext_16112 = ctx_param_ext_16071;
        ctx_param_ext_16115 = ctx_param_ext_16074;
        if (memblock_set(ctx, &mem_param_16116, &mem_param_16075,
                         "mem_param_16075") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16121, &mem_16111, "mem_16111") != 0)
            return 1;
        for (int32_t i_15058 = 0; i_15058 < iters_15047; i_15058++) {
            int32_t defunc_2_radix_sort_step_arg_15061 = mul32(2, i_15058);
            int32_t defunc_0_get_bit_arg_15062 = add32(1,
                                                       defunc_2_radix_sort_step_arg_15061);
            bool cond_f_res_15063 = defunc_0_get_bit_arg_15062 == 31;
            bool cond_f_res_15064 = defunc_2_radix_sort_step_arg_15061 == 31;
            int64_t discard_15745;
            int64_t discard_15746;
            int64_t discard_15747;
            int64_t discard_15748;
            int64_t scanacc_15730;
            int64_t scanacc_15731;
            int64_t scanacc_15732;
            int64_t scanacc_15733;
            
            scanacc_15730 = (int64_t) 0;
            scanacc_15731 = (int64_t) 0;
            scanacc_15732 = (int64_t) 0;
            scanacc_15733 = (int64_t) 0;
            for (int64_t i_15739 = 0; i_15739 < loopz2083U_15036; i_15739++) {
                int32_t x_15102;
                
                x_15102 = ((int32_t *) mem_param_16116.mem)[i_15739];
                
                int32_t zgzg_res_15103 = ashr32(x_15102,
                                                defunc_0_get_bit_arg_15062);
                int32_t za_res_15104 = 1 & zgzg_res_15103;
                int32_t zgzg_res_15105 = ashr32(x_15102, 31);
                int32_t za_res_15106 = 1 & zgzg_res_15105;
                bool cond_15107 = za_res_15106 == 1;
                bool x_15108 = !cond_15107;
                bool y_15109 = cond_f_res_15063 && x_15108;
                bool cond_15110 = cond_15107 || y_15109;
                int32_t defunc_1_get_bit_res_15111;
                
                if (cond_15110) {
                    int32_t defunc_1_get_bit_res_t_res_15112 = 1 ^ za_res_15104;
                    
                    defunc_1_get_bit_res_15111 =
                        defunc_1_get_bit_res_t_res_15112;
                } else {
                    defunc_1_get_bit_res_15111 = za_res_15104;
                }
                
                int32_t x_15113 = mul32(2, defunc_1_get_bit_res_15111);
                int32_t zgzg_res_15114 = ashr32(x_15102,
                                                defunc_2_radix_sort_step_arg_15061);
                int32_t za_res_15115 = 1 & zgzg_res_15114;
                bool y_15116 = cond_f_res_15064 && x_15108;
                bool cond_15117 = cond_15107 || y_15116;
                int32_t defunc_1_get_bit_res_15118;
                
                if (cond_15117) {
                    int32_t defunc_1_get_bit_res_t_res_15119 = 1 ^ za_res_15115;
                    
                    defunc_1_get_bit_res_15118 =
                        defunc_1_get_bit_res_t_res_15119;
                } else {
                    defunc_1_get_bit_res_15118 = za_res_15115;
                }
                
                int32_t defunc_0_f_res_15120 = add32(x_15113,
                                                     defunc_1_get_bit_res_15118);
                bool cond_15121 = defunc_0_f_res_15120 == 0;
                int64_t defunc_0_f_res_15122 = btoi_bool_i64(cond_15121);
                int64_t defunc_0_f_res_15123;
                int64_t defunc_0_f_res_15124;
                int64_t defunc_0_f_res_15125;
                
                if (cond_15121) {
                    defunc_0_f_res_15123 = (int64_t) 0;
                    defunc_0_f_res_15124 = (int64_t) 0;
                    defunc_0_f_res_15125 = (int64_t) 0;
                } else {
                    bool cond_15126 = defunc_0_f_res_15120 == 1;
                    int64_t defunc_0_f_res_f_res_15127 =
                            btoi_bool_i64(cond_15126);
                    int64_t defunc_0_f_res_f_res_15128;
                    int64_t defunc_0_f_res_f_res_15129;
                    
                    if (cond_15126) {
                        defunc_0_f_res_f_res_15128 = (int64_t) 0;
                        defunc_0_f_res_f_res_15129 = (int64_t) 0;
                    } else {
                        bool cond_15130 = defunc_0_f_res_15120 == 2;
                        int64_t defunc_0_f_res_f_res_f_res_15131 =
                                btoi_bool_i64(cond_15130);
                        bool cond_neg_15132 = !cond_15130;
                        int64_t defunc_0_f_res_f_res_f_res_15133 =
                                btoi_bool_i64(cond_neg_15132);
                        
                        defunc_0_f_res_f_res_15128 =
                            defunc_0_f_res_f_res_f_res_15131;
                        defunc_0_f_res_f_res_15129 =
                            defunc_0_f_res_f_res_f_res_15133;
                    }
                    defunc_0_f_res_15123 = defunc_0_f_res_f_res_15127;
                    defunc_0_f_res_15124 = defunc_0_f_res_f_res_15128;
                    defunc_0_f_res_15125 = defunc_0_f_res_f_res_15129;
                }
                
                int64_t defunc_1_op_res_15098 = add64(defunc_0_f_res_15122,
                                                      scanacc_15730);
                int64_t defunc_1_op_res_15099 = add64(defunc_0_f_res_15123,
                                                      scanacc_15731);
                int64_t defunc_1_op_res_15100 = add64(defunc_0_f_res_15124,
                                                      scanacc_15732);
                int64_t defunc_1_op_res_15101 = add64(defunc_0_f_res_15125,
                                                      scanacc_15733);
                
                ((int64_t *) mem_16126)[i_15739] = defunc_1_op_res_15098;
                ((int64_t *) mem_16129)[i_15739] = defunc_1_op_res_15099;
                ((int64_t *) mem_16132)[i_15739] = defunc_1_op_res_15100;
                ((int64_t *) mem_16135)[i_15739] = defunc_1_op_res_15101;
                ((int32_t *) mem_16138)[i_15739] = defunc_0_f_res_15120;
                
                int64_t scanacc_tmp_17190 = defunc_1_op_res_15098;
                int64_t scanacc_tmp_17191 = defunc_1_op_res_15099;
                int64_t scanacc_tmp_17192 = defunc_1_op_res_15100;
                int64_t scanacc_tmp_17193 = defunc_1_op_res_15101;
                
                scanacc_15730 = scanacc_tmp_17190;
                scanacc_15731 = scanacc_tmp_17191;
                scanacc_15732 = scanacc_tmp_17192;
                scanacc_15733 = scanacc_tmp_17193;
            }
            discard_15745 = scanacc_15730;
            discard_15746 = scanacc_15731;
            discard_15747 = scanacc_15732;
            discard_15748 = scanacc_15733;
            
            int64_t last_res_15139;
            
            last_res_15139 = ((int64_t *) mem_16126)[i_15049];
            
            int64_t last_res_15140;
            
            last_res_15140 = ((int64_t *) mem_16129)[i_15049];
            
            int64_t last_res_15141;
            
            last_res_15141 = ((int64_t *) mem_16132)[i_15049];
            
            struct memblock mem_16201;
            
            mem_16201.references = NULL;
            if (memblock_alloc(ctx, &mem_16201, bytes_16137, "mem_16201")) {
                err = 1;
                goto cleanup;
            }
            if (loopz2083U_15036 * (int64_t) 4 > 0)
                memmove(mem_16201.mem + (int64_t) 0, mem_param_16116.mem +
                        (int64_t) 0, loopz2083U_15036 * (int64_t) 4);
            
            struct memblock mem_16204;
            
            mem_16204.references = NULL;
            if (memblock_alloc(ctx, &mem_16204, bytes_16110, "mem_16204")) {
                err = 1;
                goto cleanup;
            }
            if (loopz2083U_15036 * (int64_t) 8 > 0)
                memmove(mem_16204.mem + (int64_t) 0, mem_param_16121.mem +
                        (int64_t) 0, loopz2083U_15036 * (int64_t) 8);
            for (int64_t write_iter_15749 = 0; write_iter_15749 <
                 loopz2083U_15036; write_iter_15749++) {
                int32_t write_iv_15752;
                
                write_iv_15752 = ((int32_t *) mem_16138)[write_iter_15749];
                
                int64_t write_iv_15753;
                
                write_iv_15753 = ((int64_t *) mem_16126)[write_iter_15749];
                
                int64_t write_iv_15754;
                
                write_iv_15754 = ((int64_t *) mem_16129)[write_iter_15749];
                
                int64_t write_iv_15755;
                
                write_iv_15755 = ((int64_t *) mem_16132)[write_iter_15749];
                
                int64_t write_iv_15756;
                
                write_iv_15756 = ((int64_t *) mem_16135)[write_iter_15749];
                
                bool match_lit_15153 = 0 == write_iv_15752;
                int64_t defunc_1_f_res_15154;
                
                if (match_lit_15153) {
                    int64_t case_res_15155 = sub64(write_iv_15753, (int64_t) 1);
                    
                    defunc_1_f_res_15154 = case_res_15155;
                } else {
                    bool match_lit_15156 = 1 == write_iv_15752;
                    int64_t x_15157;
                    
                    if (match_lit_15156) {
                        int64_t x_15158 = add64(last_res_15139, write_iv_15754);
                        int64_t case_res_15159 = sub64(x_15158, (int64_t) 1);
                        
                        x_15157 = case_res_15159;
                    } else {
                        bool match_lit_15160 = 2 == write_iv_15752;
                        int64_t x_15161;
                        
                        if (match_lit_15160) {
                            int64_t x_15162 = add64(last_res_15139,
                                                    last_res_15140);
                            int64_t x_15163 = add64(x_15162, write_iv_15755);
                            int64_t case_res_15164 = sub64(x_15163,
                                                           (int64_t) 1);
                            
                            x_15161 = case_res_15164;
                        } else {
                            int64_t x_15165 = add64(last_res_15139,
                                                    last_res_15140);
                            int64_t x_15166 = add64(last_res_15141, x_15165);
                            int64_t x_15167 = add64(x_15166, write_iv_15756);
                            int64_t defunc_1_f_res_res_15168 = sub64(x_15167,
                                                                     (int64_t) 1);
                            
                            x_15161 = defunc_1_f_res_res_15168;
                        }
                        x_15157 = x_15161;
                    }
                    defunc_1_f_res_15154 = x_15157;
                }
                if (sle64((int64_t) 0, defunc_1_f_res_15154) &&
                    slt64(defunc_1_f_res_15154, loopz2083U_15036)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_16201.mem + defunc_1_f_res_15154 *
                                (int64_t) 4, mem_param_16116.mem +
                                ((int64_t) 0 + (int64_t) 1 * write_iter_15749) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, defunc_1_f_res_15154) &&
                    slt64(defunc_1_f_res_15154, loopz2083U_15036)) {
                    if ((int64_t) 8 > 0)
                        memmove(mem_16204.mem + defunc_1_f_res_15154 *
                                (int64_t) 8, mem_param_16121.mem +
                                ((int64_t) 0 + (int64_t) 1 * write_iter_15749) *
                                (int64_t) 8, (int64_t) 8);
                }
            }
            
            int64_t ctx_param_ext_tmp_17184 = loopz2083U_15036;
            int64_t ctx_param_ext_tmp_17185 = loopz2083U_15036;
            struct memblock mem_param_tmp_17186;
            
            mem_param_tmp_17186.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_17186, &mem_16201,
                             "mem_16201") != 0)
                return 1;
            
            struct memblock mem_param_tmp_17187;
            
            mem_param_tmp_17187.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_17187, &mem_16204,
                             "mem_16204") != 0)
                return 1;
            ctx_param_ext_16112 = ctx_param_ext_tmp_17184;
            ctx_param_ext_16115 = ctx_param_ext_tmp_17185;
            if (memblock_set(ctx, &mem_param_16116, &mem_param_tmp_17186,
                             "mem_param_tmp_17186") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_16121, &mem_param_tmp_17187,
                             "mem_param_tmp_17187") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_17187,
                               "mem_param_tmp_17187") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_17186,
                               "mem_param_tmp_17186") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16204, "mem_16204") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16201, "mem_16201") != 0)
                return 1;
        }
        ext_16238 = ctx_param_ext_16112;
        ext_16235 = ctx_param_ext_16115;
        if (memblock_set(ctx, &ext_mem_16230, &mem_param_16116,
                         "mem_param_16116") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_16229, &mem_param_16121,
                         "mem_param_16121") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
            return 1;
        
        int64_t binop_y_16239 = (int64_t) 4 * loopz2083U_15036;
        int64_t bytes_16240 = smax64((int64_t) 0, binop_y_16239);
        
        if (mem_16241_cached_sizze_17303 < (size_t) bytes_16240) {
            mem_16241 = realloc(mem_16241, bytes_16240);
            mem_16241_cached_sizze_17303 = bytes_16240;
        }
        for (int64_t i_15763 = 0; i_15763 < loopz2083U_15036; i_15763++) {
            int64_t x_15170;
            
            x_15170 = ((int64_t *) ext_mem_16229.mem)[i_15763];
            
            int32_t defunc_0_g_res_15171 = sext_i64_i32(x_15170);
            
            ((int32_t *) mem_16241)[i_15763] = defunc_0_g_res_15171;
        }
        if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
            return 1;
        
        int64_t ext_16319;
        int64_t ext_16316;
        struct memblock ext_mem_16315;
        
        ext_mem_16315.references = NULL;
        
        int64_t nubi32_res_15172;
        int64_t loopz2082U_15175;
        int64_t ctx_param_ext_16254;
        int64_t ctx_param_ext_16257;
        struct memblock mem_param_16258;
        
        mem_param_16258.references = NULL;
        ctx_param_ext_16254 = (int64_t) 0;
        ctx_param_ext_16257 = (int64_t) 0;
        if (memblock_set(ctx, &mem_param_16258, &mem_16060, "mem_16060") != 0)
            return 1;
        loopz2082U_15175 = (int64_t) 0;
        for (int64_t i_15174 = 0; i_15174 < loopz2083U_15036; i_15174++) {
            int32_t arr_elem_15177;
            
            arr_elem_15177 = ((int32_t *) mem_param_16070.mem)[i_15174];
            for (int64_t i_17207 = 0; i_17207 < (int64_t) 1; i_17207++) {
                ((int32_t *) mem_16264)[i_17207] = arr_elem_15177;
            }
            
            int64_t binop_y_16265 = (int64_t) 8 * loopz2082U_15175;
            int64_t bytes_16266 = smax64((int64_t) 0, binop_y_16265);
            
            if (mem_16267_cached_sizze_17305 < (size_t) bytes_16266) {
                mem_16267 = realloc(mem_16267, bytes_16266);
                mem_16267_cached_sizze_17305 = bytes_16266;
            }
            if (mem_16270_cached_sizze_17306 < (size_t) bytes_16266) {
                mem_16270 = realloc(mem_16270, bytes_16266);
                mem_16270_cached_sizze_17306 = bytes_16266;
            }
            
            int64_t discard_15773;
            int64_t scanacc_15767 = (int64_t) 0;
            
            for (int64_t i_15770 = 0; i_15770 < loopz2082U_15175; i_15770++) {
                int32_t x_15184;
                
                x_15184 = ((int32_t *) mem_param_16258.mem)[i_15770];
                
                bool defunc_0_p_res_15185 = x_15184 == arr_elem_15177;
                int64_t defunc_1_lifted_lambda_res_15186 =
                        btoi_bool_i64(defunc_0_p_res_15185);
                bool is_i_15187 = defunc_1_lifted_lambda_res_15186 ==
                     (int64_t) 0;
                bool cond_neg_15188 = !is_i_15187;
                int64_t part_res_15189 = btoi_bool_i64(cond_neg_15188);
                int64_t part_res_15190 = btoi_bool_i64(is_i_15187);
                int64_t zz_15183 = part_res_15190 + scanacc_15767;
                
                ((int64_t *) mem_16267)[i_15770] = zz_15183;
                ((int64_t *) mem_16270)[i_15770] = part_res_15189;
                
                int64_t scanacc_tmp_17208 = zz_15183;
                
                scanacc_15767 = scanacc_tmp_17208;
            }
            discard_15773 = scanacc_15767;
            
            int64_t last_index_15191 = loopz2082U_15175 - (int64_t) 1;
            bool is_empty_15192 = loopz2082U_15175 == (int64_t) 0;
            int64_t partition_sizze_15193;
            
            if (is_empty_15192) {
                partition_sizze_15193 = (int64_t) 0;
            } else {
                int64_t last_offset_15194;
                
                last_offset_15194 = ((int64_t *) mem_16267)[last_index_15191];
                partition_sizze_15193 = last_offset_15194;
            }
            
            int64_t binop_y_16295 = (int64_t) 4 * loopz2082U_15175;
            int64_t bytes_16296 = smax64((int64_t) 0, binop_y_16295);
            
            if (mem_16297_cached_sizze_17307 < (size_t) bytes_16296) {
                mem_16297 = realloc(mem_16297, bytes_16296);
                mem_16297_cached_sizze_17307 = bytes_16296;
            }
            for (int64_t write_iter_15774 = 0; write_iter_15774 <
                 loopz2082U_15175; write_iter_15774++) {
                int64_t write_iv_15776;
                
                write_iv_15776 = ((int64_t *) mem_16270)[write_iter_15774];
                
                int64_t write_iv_15777;
                
                write_iv_15777 = ((int64_t *) mem_16267)[write_iter_15774];
                
                bool is_this_one_15200 = write_iv_15776 == (int64_t) 0;
                int64_t this_offset_15201 = (int64_t) -1 + write_iv_15777;
                int64_t total_res_15202;
                
                if (is_this_one_15200) {
                    total_res_15202 = this_offset_15201;
                } else {
                    total_res_15202 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, total_res_15202) &&
                    slt64(total_res_15202, loopz2082U_15175)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_16297 + total_res_15202 * (int64_t) 4,
                                mem_param_16258.mem + ((int64_t) 0 +
                                                       (int64_t) 1 *
                                                       write_iter_15774) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            bool empty_slice_15203 = partition_sizze_15193 == (int64_t) 0;
            int64_t m_15204 = sub64(partition_sizze_15193, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_15205 = sle64((int64_t) 0, m_15204);
            bool i_p_m_t_s_leq_w_15206 = slt64(m_15204, loopz2082U_15175);
            bool i_lte_j_15207 = sle64((int64_t) 0, partition_sizze_15193);
            bool y_15208 = zzero_leq_i_p_m_t_s_15205 && i_p_m_t_s_leq_w_15206;
            bool y_15209 = i_lte_j_15207 && y_15208;
            bool ok_or_empty_15210 = empty_slice_15203 || y_15209;
            bool index_certs_15211;
            
            if (!ok_or_empty_15210) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [:", (long long) partition_sizze_15193,
                              "] out of bounds for array of shape [",
                              (long long) loopz2082U_15175, "].",
                              "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:11:41-61\n   #2  arrange.fut:41:26-40\n   #3  arrange.fut:50:25-84\n   #4  arrange.fut:68:5-50\n   #5  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            int64_t conc_tmp_15213 = (int64_t) 1 + partition_sizze_15193;
            int64_t binop_y_16310 = (int64_t) 4 * conc_tmp_15213;
            int64_t bytes_16311 = smax64((int64_t) 0, binop_y_16310);
            struct memblock mem_16312;
            
            mem_16312.references = NULL;
            if (memblock_alloc(ctx, &mem_16312, bytes_16311, "mem_16312")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_17212 = (int64_t) 0;
            
            if (partition_sizze_15193 * (int64_t) 4 > 0)
                memmove(mem_16312.mem + tmp_offs_17212 * (int64_t) 4,
                        mem_16297 + (int64_t) 0, partition_sizze_15193 *
                        (int64_t) 4);
            tmp_offs_17212 += partition_sizze_15193;
            if ((int64_t) 4 > 0)
                memmove(mem_16312.mem + tmp_offs_17212 * (int64_t) 4,
                        mem_16264 + (int64_t) 0, (int64_t) 4);
            tmp_offs_17212 += (int64_t) 1;
            
            int64_t ctx_param_ext_tmp_17202 = conc_tmp_15213;
            int64_t ctx_param_ext_tmp_17203 = conc_tmp_15213;
            struct memblock mem_param_tmp_17204;
            
            mem_param_tmp_17204.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_17204, &mem_16312,
                             "mem_16312") != 0)
                return 1;
            
            int64_t loopz2082U_tmp_17205 = conc_tmp_15213;
            
            ctx_param_ext_16254 = ctx_param_ext_tmp_17202;
            ctx_param_ext_16257 = ctx_param_ext_tmp_17203;
            if (memblock_set(ctx, &mem_param_16258, &mem_param_tmp_17204,
                             "mem_param_tmp_17204") != 0)
                return 1;
            loopz2082U_15175 = loopz2082U_tmp_17205;
            if (memblock_unref(ctx, &mem_param_tmp_17204,
                               "mem_param_tmp_17204") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16312, "mem_16312") != 0)
                return 1;
        }
        ext_16319 = ctx_param_ext_16254;
        ext_16316 = ctx_param_ext_16257;
        if (memblock_set(ctx, &ext_mem_16315, &mem_param_16258,
                         "mem_param_16258") != 0)
            return 1;
        nubi32_res_15172 = loopz2082U_15175;
        
        int64_t binop_y_16320 = (int64_t) 4 * nubi32_res_15172;
        int64_t bytes_16321 = smax64((int64_t) 0, binop_y_16320);
        
        if (mem_16322_cached_sizze_17308 < (size_t) bytes_16321) {
            mem_16322 = realloc(mem_16322, bytes_16321);
            mem_16322_cached_sizze_17308 = bytes_16321;
        }
        
        struct memblock mem_16325;
        
        mem_16325.references = NULL;
        if (memblock_alloc(ctx, &mem_16325, bytes_16321, "mem_16325")) {
            err = 1;
            goto cleanup;
        }
        if (mem_16342_cached_sizze_17309 < (size_t) bytes_16110) {
            mem_16342 = realloc(mem_16342, bytes_16110);
            mem_16342_cached_sizze_17309 = bytes_16110;
        }
        if (mem_16345_cached_sizze_17310 < (size_t) bytes_16110) {
            mem_16345 = realloc(mem_16345, bytes_16110);
            mem_16345_cached_sizze_17310 = bytes_16110;
        }
        if (mem_16372_cached_sizze_17311 < (size_t) bytes_16110) {
            mem_16372 = realloc(mem_16372, bytes_16110);
            mem_16372_cached_sizze_17311 = bytes_16110;
        }
        if (mem_16402_cached_sizze_17313 < (size_t) bytes_16110) {
            mem_16402 = realloc(mem_16402, bytes_16110);
            mem_16402_cached_sizze_17313 = bytes_16110;
        }
        if (mem_16405_cached_sizze_17314 < (size_t) bytes_16110) {
            mem_16405 = realloc(mem_16405, bytes_16110);
            mem_16405_cached_sizze_17314 = bytes_16110;
        }
        if (mem_16432_cached_sizze_17315 < (size_t) bytes_16240) {
            mem_16432 = realloc(mem_16432, bytes_16240);
            mem_16432_cached_sizze_17315 = bytes_16240;
        }
        for (int64_t i_15821 = 0; i_15821 < nubi32_res_15172; i_15821++) {
            int32_t x_15217;
            
            x_15217 = ((int32_t *) ext_mem_16315.mem)[i_15821];
            
            int64_t discard_15788;
            int64_t scanacc_15782 = (int64_t) 0;
            
            for (int64_t i_15785 = 0; i_15785 < loopz2083U_15036; i_15785++) {
                int32_t x_15223;
                
                x_15223 = ((int32_t *) mem_param_16070.mem)[i_15785];
                
                bool defunc_0_p_res_15224 = x_15223 == x_15217;
                bool cond_neg_15225 = !defunc_0_p_res_15224;
                int64_t defunc_1_lifted_lambda_res_15226 =
                        btoi_bool_i64(cond_neg_15225);
                bool is_i_15227 = defunc_1_lifted_lambda_res_15226 ==
                     (int64_t) 0;
                bool cond_neg_15228 = !is_i_15227;
                int64_t part_res_15229 = btoi_bool_i64(cond_neg_15228);
                int64_t part_res_15230 = btoi_bool_i64(is_i_15227);
                int64_t zz_15222 = part_res_15230 + scanacc_15782;
                
                ((int64_t *) mem_16342)[i_15785] = zz_15222;
                ((int64_t *) mem_16345)[i_15785] = part_res_15229;
                
                int64_t scanacc_tmp_17215 = zz_15222;
                
                scanacc_15782 = scanacc_tmp_17215;
            }
            discard_15788 = scanacc_15782;
            
            int64_t partition_sizze_15231;
            
            if (cond_15046) {
                partition_sizze_15231 = (int64_t) 0;
            } else {
                int64_t last_offset_15232;
                
                last_offset_15232 = ((int64_t *) mem_16342)[i_15049];
                partition_sizze_15231 = last_offset_15232;
            }
            for (int64_t write_iter_15789 = 0; write_iter_15789 <
                 loopz2083U_15036; write_iter_15789++) {
                int64_t write_iv_15791;
                
                write_iv_15791 = ((int64_t *) mem_16345)[write_iter_15789];
                
                int64_t write_iv_15792;
                
                write_iv_15792 = ((int64_t *) mem_16342)[write_iter_15789];
                
                bool is_this_one_15239 = write_iv_15791 == (int64_t) 0;
                int64_t this_offset_15240 = (int64_t) -1 + write_iv_15792;
                int64_t total_res_15241;
                
                if (is_this_one_15239) {
                    total_res_15241 = this_offset_15240;
                } else {
                    total_res_15241 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, total_res_15241) &&
                    slt64(total_res_15241, loopz2083U_15036)) {
                    ((int64_t *) mem_16372)[total_res_15241] = write_iter_15789;
                }
            }
            
            bool empty_slice_15242 = partition_sizze_15231 == (int64_t) 0;
            int64_t m_15243 = sub64(partition_sizze_15231, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_15244 = sle64((int64_t) 0, m_15243);
            bool i_p_m_t_s_leq_w_15245 = slt64(m_15243, loopz2083U_15036);
            bool i_lte_j_15246 = sle64((int64_t) 0, partition_sizze_15231);
            bool y_15247 = zzero_leq_i_p_m_t_s_15244 && i_p_m_t_s_leq_w_15245;
            bool y_15248 = i_lte_j_15246 && y_15247;
            bool ok_or_empty_15249 = empty_slice_15242 || y_15248;
            bool index_certs_15250;
            
            if (!ok_or_empty_15249) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [:", (long long) partition_sizze_15231,
                              "] out of bounds for array of shape [",
                              (long long) loopz2083U_15036, "].",
                              "-> #0  /prelude/soacs.fut:163:6-16\n   #1  /prelude/functional.fut:9:42-44\n   #2  arrange.fut:14:5-15:32\n   #3  arrange.fut:35:27-53\n   #4  arrange.fut:42:28-104\n   #5  arrange.fut:42:17-120\n   #6  arrange.fut:50:25-84\n   #7  arrange.fut:68:5-50\n   #8  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_16385 = (int64_t) 4 * partition_sizze_15231;
            int64_t bytes_16386 = smax64((int64_t) 0, binop_y_16385);
            
            if (mem_16387_cached_sizze_17312 < (size_t) bytes_16386) {
                mem_16387 = realloc(mem_16387, bytes_16386);
                mem_16387_cached_sizze_17312 = bytes_16386;
            }
            for (int64_t i_15798 = 0; i_15798 < partition_sizze_15231;
                 i_15798++) {
                int64_t x_15253;
                
                x_15253 = ((int64_t *) mem_16372)[i_15798];
                
                int32_t defunc_0_g_res_15254 = sext_i64_i32(x_15253);
                
                ((int32_t *) mem_16387)[i_15798] = defunc_0_g_res_15254;
            }
            
            int64_t discard_15810;
            int64_t scanacc_15804 = (int64_t) 0;
            
            for (int64_t i_15807 = 0; i_15807 < loopz2083U_15036; i_15807++) {
                int32_t x_15260;
                
                x_15260 = ((int32_t *) mem_16241)[i_15807];
                
                bool defunc_2_reduce_res_15261;
                bool redout_15800 = 0;
                
                for (int64_t i_15801 = 0; i_15801 < partition_sizze_15231;
                     i_15801++) {
                    int32_t x_15265;
                    
                    x_15265 = ((int32_t *) mem_16387)[i_15801];
                    
                    bool defunc_0_f_res_15266 = x_15265 == x_15260;
                    bool defunc_1_op_res_15264 = defunc_0_f_res_15266 ||
                         redout_15800;
                    bool redout_tmp_17223 = defunc_1_op_res_15264;
                    
                    redout_15800 = redout_tmp_17223;
                }
                defunc_2_reduce_res_15261 = redout_15800;
                
                bool cond_neg_15267 = !defunc_2_reduce_res_15261;
                int64_t defunc_1_lifted_lambda_res_15268 =
                        btoi_bool_i64(cond_neg_15267);
                bool is_i_15269 = defunc_1_lifted_lambda_res_15268 ==
                     (int64_t) 0;
                bool cond_neg_15270 = !is_i_15269;
                int64_t part_res_15271 = btoi_bool_i64(cond_neg_15270);
                int64_t part_res_15272 = btoi_bool_i64(is_i_15269);
                int64_t zz_15259 = part_res_15272 + scanacc_15804;
                
                ((int64_t *) mem_16402)[i_15807] = zz_15259;
                ((int64_t *) mem_16405)[i_15807] = part_res_15271;
                
                int64_t scanacc_tmp_17220 = zz_15259;
                
                scanacc_15804 = scanacc_tmp_17220;
            }
            discard_15810 = scanacc_15804;
            
            int64_t partition_sizze_15273;
            
            if (cond_15046) {
                partition_sizze_15273 = (int64_t) 0;
            } else {
                int64_t last_offset_15274;
                
                last_offset_15274 = ((int64_t *) mem_16402)[i_15049];
                partition_sizze_15273 = last_offset_15274;
            }
            for (int64_t write_iter_15811 = 0; write_iter_15811 <
                 loopz2083U_15036; write_iter_15811++) {
                int64_t write_iv_15813;
                
                write_iv_15813 = ((int64_t *) mem_16405)[write_iter_15811];
                
                int64_t write_iv_15814;
                
                write_iv_15814 = ((int64_t *) mem_16402)[write_iter_15811];
                
                bool is_this_one_15280 = write_iv_15813 == (int64_t) 0;
                int64_t this_offset_15281 = (int64_t) -1 + write_iv_15814;
                int64_t total_res_15282;
                
                if (is_this_one_15280) {
                    total_res_15282 = this_offset_15281;
                } else {
                    total_res_15282 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, total_res_15282) &&
                    slt64(total_res_15282, loopz2083U_15036)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_16432 + total_res_15282 * (int64_t) 4,
                                mem_16241 + ((int64_t) 0 + (int64_t) 1 *
                                             write_iter_15811) * (int64_t) 4,
                                (int64_t) 4);
                }
            }
            
            bool empty_slice_15283 = partition_sizze_15273 == (int64_t) 0;
            int64_t m_15284 = sub64(partition_sizze_15273, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_15285 = sle64((int64_t) 0, m_15284);
            bool i_p_m_t_s_leq_w_15286 = slt64(m_15284, loopz2083U_15036);
            bool i_lte_j_15287 = sle64((int64_t) 0, partition_sizze_15273);
            bool y_15288 = zzero_leq_i_p_m_t_s_15285 && i_p_m_t_s_leq_w_15286;
            bool y_15289 = i_lte_j_15287 && y_15288;
            bool ok_or_empty_15290 = empty_slice_15283 || y_15289;
            bool index_certs_15291;
            
            if (!ok_or_empty_15290) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [:", (long long) partition_sizze_15273,
                              "] out of bounds for array of shape [",
                              (long long) loopz2083U_15036, "].",
                              "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:36:24-79\n   #2  arrange.fut:42:28-104\n   #3  arrange.fut:42:17-120\n   #4  arrange.fut:50:25-84\n   #5  arrange.fut:68:5-50\n   #6  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            bool y_15292 = slt64((int64_t) 0, partition_sizze_15273);
            bool index_certs_15293;
            
            if (!y_15292) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) (int64_t) 0,
                              "] out of bounds for array of shape [",
                              (long long) partition_sizze_15273, "].",
                              "-> #0  /prelude/array.fut:21:29-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  arrange.fut:36:24-87\n   #3  arrange.fut:42:28-104\n   #4  arrange.fut:42:17-120\n   #5  arrange.fut:50:25-84\n   #6  arrange.fut:68:5-50\n   #7  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            int32_t defunc_0_f_res_15294;
            
            defunc_0_f_res_15294 = ((int32_t *) mem_16432)[(int64_t) 0];
            
            int64_t minDistIndex_15295 = sext_i32_i64(defunc_0_f_res_15294);
            bool x_15296 = sle64((int64_t) 0, minDistIndex_15295);
            bool y_15297 = slt64(minDistIndex_15295, loopz2083U_15036);
            bool bounds_check_15298 = x_15296 && y_15297;
            bool index_certs_15299;
            
            if (!bounds_check_15298) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) minDistIndex_15295,
                              "] out of bounds for array of shape [",
                              (long long) loopz2083U_15036, "].",
                              "-> #0  arrange.fut:37:9-29\n   #1  arrange.fut:42:28-104\n   #2  arrange.fut:42:17-120\n   #3  arrange.fut:50:25-84\n   #4  arrange.fut:68:5-50\n   #5  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            if ((int64_t) 4 > 0)
                memmove(mem_16322 + i_15821 * (int64_t) 4, mem_param_16065.mem +
                        ((int64_t) 0 + (int64_t) 1 * minDistIndex_15295) *
                        (int64_t) 4, (int64_t) 4);
            if ((int64_t) 4 > 0)
                memmove(mem_16325.mem + i_15821 * (int64_t) 4,
                        mem_param_16075.mem + ((int64_t) 0 + (int64_t) 1 *
                                               minDistIndex_15295) *
                        (int64_t) 4, (int64_t) 4);
        }
        
        int64_t binop_y_16455 = (int64_t) 8 * nubi32_res_15172;
        int64_t bytes_16456 = smax64((int64_t) 0, binop_y_16455);
        struct memblock mem_16457;
        
        mem_16457.references = NULL;
        if (memblock_alloc(ctx, &mem_16457, bytes_16456, "mem_16457")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_17225 = 0; i_17225 < nubi32_res_15172; i_17225++) {
            int64_t x_17226 = (int64_t) 0 + i_17225 * (int64_t) 1;
            
            ((int64_t *) mem_16457.mem)[i_17225] = x_17226;
        }
        
        bool cond_15303 = nubi32_res_15172 == (int64_t) 0;
        int32_t iters_15304;
        
        if (cond_15303) {
            iters_15304 = 0;
        } else {
            iters_15304 = 16;
        }
        
        bool loop_nonempty_15305 = slt32(0, iters_15304);
        int64_t i_15306 = sub64(nubi32_res_15172, (int64_t) 1);
        bool x_15307 = sle64((int64_t) 0, i_15306);
        bool y_15308 = slt64(i_15306, nubi32_res_15172);
        bool bounds_check_15309 = x_15307 && y_15308;
        bool loop_not_taken_15310 = !loop_nonempty_15305;
        bool protect_assert_disj_15311 = bounds_check_15309 ||
             loop_not_taken_15310;
        bool index_certs_15312;
        
        if (!protect_assert_disj_15311) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) i_15306,
                                   "] out of bounds for array of shape [",
                                   (long long) nubi32_res_15172, "].",
                                   "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:104:6-36\n   #4  /prelude/functional.fut:9:42-44\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-61:47\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:110:3-57\n   #7  /prelude/functional.fut:9:42-44\n   #8  arrange.fut:6:5-7:60\n   #9  arrange.fut:44:37-53\n   #10 arrange.fut:50:25-84\n   #11 arrange.fut:68:5-50\n   #12 arrange.fut:67:1-68:60\n");
            if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        if (mem_16472_cached_sizze_17316 < (size_t) bytes_16456) {
            mem_16472 = realloc(mem_16472, bytes_16456);
            mem_16472_cached_sizze_17316 = bytes_16456;
        }
        if (mem_16475_cached_sizze_17317 < (size_t) bytes_16456) {
            mem_16475 = realloc(mem_16475, bytes_16456);
            mem_16475_cached_sizze_17317 = bytes_16456;
        }
        if (mem_16478_cached_sizze_17318 < (size_t) bytes_16456) {
            mem_16478 = realloc(mem_16478, bytes_16456);
            mem_16478_cached_sizze_17318 = bytes_16456;
        }
        if (mem_16481_cached_sizze_17319 < (size_t) bytes_16456) {
            mem_16481 = realloc(mem_16481, bytes_16456);
            mem_16481_cached_sizze_17319 = bytes_16456;
        }
        if (mem_16484_cached_sizze_17320 < (size_t) bytes_16321) {
            mem_16484 = realloc(mem_16484, bytes_16321);
            mem_16484_cached_sizze_17320 = bytes_16321;
        }
        
        struct memblock ext_mem_16576;
        
        ext_mem_16576.references = NULL;
        
        struct memblock ext_mem_16575;
        
        ext_mem_16575.references = NULL;
        
        struct memblock mem_param_16462;
        
        mem_param_16462.references = NULL;
        
        struct memblock mem_param_16467;
        
        mem_param_16467.references = NULL;
        if (memblock_set(ctx, &mem_param_16462, &mem_16325, "mem_16325") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16467, &mem_16457, "mem_16457") != 0)
            return 1;
        for (int32_t i_15315 = 0; i_15315 < iters_15304; i_15315++) {
            int32_t defunc_2_radix_sort_step_arg_15318 = mul32(2, i_15315);
            int32_t defunc_0_get_bit_arg_15319 = add32(1,
                                                       defunc_2_radix_sort_step_arg_15318);
            bool cond_f_res_15320 = defunc_0_get_bit_arg_15319 == 31;
            bool cond_f_res_15321 = defunc_2_radix_sort_step_arg_15318 == 31;
            int64_t discard_15844;
            int64_t discard_15845;
            int64_t discard_15846;
            int64_t discard_15847;
            int64_t scanacc_15829;
            int64_t scanacc_15830;
            int64_t scanacc_15831;
            int64_t scanacc_15832;
            
            scanacc_15829 = (int64_t) 0;
            scanacc_15830 = (int64_t) 0;
            scanacc_15831 = (int64_t) 0;
            scanacc_15832 = (int64_t) 0;
            for (int64_t i_15838 = 0; i_15838 < nubi32_res_15172; i_15838++) {
                int32_t x_15359;
                
                x_15359 = ((int32_t *) mem_param_16462.mem)[i_15838];
                
                int32_t zgzg_res_15360 = ashr32(x_15359,
                                                defunc_0_get_bit_arg_15319);
                int32_t za_res_15361 = 1 & zgzg_res_15360;
                int32_t zgzg_res_15362 = ashr32(x_15359, 31);
                int32_t za_res_15363 = 1 & zgzg_res_15362;
                bool cond_15364 = za_res_15363 == 1;
                bool x_15365 = !cond_15364;
                bool y_15366 = cond_f_res_15320 && x_15365;
                bool cond_15367 = cond_15364 || y_15366;
                int32_t defunc_1_get_bit_res_15368;
                
                if (cond_15367) {
                    int32_t defunc_1_get_bit_res_t_res_15369 = 1 ^ za_res_15361;
                    
                    defunc_1_get_bit_res_15368 =
                        defunc_1_get_bit_res_t_res_15369;
                } else {
                    defunc_1_get_bit_res_15368 = za_res_15361;
                }
                
                int32_t x_15370 = mul32(2, defunc_1_get_bit_res_15368);
                int32_t zgzg_res_15371 = ashr32(x_15359,
                                                defunc_2_radix_sort_step_arg_15318);
                int32_t za_res_15372 = 1 & zgzg_res_15371;
                bool y_15373 = cond_f_res_15321 && x_15365;
                bool cond_15374 = cond_15364 || y_15373;
                int32_t defunc_1_get_bit_res_15375;
                
                if (cond_15374) {
                    int32_t defunc_1_get_bit_res_t_res_15376 = 1 ^ za_res_15372;
                    
                    defunc_1_get_bit_res_15375 =
                        defunc_1_get_bit_res_t_res_15376;
                } else {
                    defunc_1_get_bit_res_15375 = za_res_15372;
                }
                
                int32_t defunc_0_f_res_15377 = add32(x_15370,
                                                     defunc_1_get_bit_res_15375);
                bool cond_15378 = defunc_0_f_res_15377 == 0;
                int64_t defunc_0_f_res_15379 = btoi_bool_i64(cond_15378);
                int64_t defunc_0_f_res_15380;
                int64_t defunc_0_f_res_15381;
                int64_t defunc_0_f_res_15382;
                
                if (cond_15378) {
                    defunc_0_f_res_15380 = (int64_t) 0;
                    defunc_0_f_res_15381 = (int64_t) 0;
                    defunc_0_f_res_15382 = (int64_t) 0;
                } else {
                    bool cond_15383 = defunc_0_f_res_15377 == 1;
                    int64_t defunc_0_f_res_f_res_15384 =
                            btoi_bool_i64(cond_15383);
                    int64_t defunc_0_f_res_f_res_15385;
                    int64_t defunc_0_f_res_f_res_15386;
                    
                    if (cond_15383) {
                        defunc_0_f_res_f_res_15385 = (int64_t) 0;
                        defunc_0_f_res_f_res_15386 = (int64_t) 0;
                    } else {
                        bool cond_15387 = defunc_0_f_res_15377 == 2;
                        int64_t defunc_0_f_res_f_res_f_res_15388 =
                                btoi_bool_i64(cond_15387);
                        bool cond_neg_15389 = !cond_15387;
                        int64_t defunc_0_f_res_f_res_f_res_15390 =
                                btoi_bool_i64(cond_neg_15389);
                        
                        defunc_0_f_res_f_res_15385 =
                            defunc_0_f_res_f_res_f_res_15388;
                        defunc_0_f_res_f_res_15386 =
                            defunc_0_f_res_f_res_f_res_15390;
                    }
                    defunc_0_f_res_15380 = defunc_0_f_res_f_res_15384;
                    defunc_0_f_res_15381 = defunc_0_f_res_f_res_15385;
                    defunc_0_f_res_15382 = defunc_0_f_res_f_res_15386;
                }
                
                int64_t defunc_1_op_res_15355 = add64(defunc_0_f_res_15379,
                                                      scanacc_15829);
                int64_t defunc_1_op_res_15356 = add64(defunc_0_f_res_15380,
                                                      scanacc_15830);
                int64_t defunc_1_op_res_15357 = add64(defunc_0_f_res_15381,
                                                      scanacc_15831);
                int64_t defunc_1_op_res_15358 = add64(defunc_0_f_res_15382,
                                                      scanacc_15832);
                
                ((int64_t *) mem_16472)[i_15838] = defunc_1_op_res_15355;
                ((int64_t *) mem_16475)[i_15838] = defunc_1_op_res_15356;
                ((int64_t *) mem_16478)[i_15838] = defunc_1_op_res_15357;
                ((int64_t *) mem_16481)[i_15838] = defunc_1_op_res_15358;
                ((int32_t *) mem_16484)[i_15838] = defunc_0_f_res_15377;
                
                int64_t scanacc_tmp_17231 = defunc_1_op_res_15355;
                int64_t scanacc_tmp_17232 = defunc_1_op_res_15356;
                int64_t scanacc_tmp_17233 = defunc_1_op_res_15357;
                int64_t scanacc_tmp_17234 = defunc_1_op_res_15358;
                
                scanacc_15829 = scanacc_tmp_17231;
                scanacc_15830 = scanacc_tmp_17232;
                scanacc_15831 = scanacc_tmp_17233;
                scanacc_15832 = scanacc_tmp_17234;
            }
            discard_15844 = scanacc_15829;
            discard_15845 = scanacc_15830;
            discard_15846 = scanacc_15831;
            discard_15847 = scanacc_15832;
            
            int64_t last_res_15396;
            
            last_res_15396 = ((int64_t *) mem_16472)[i_15306];
            
            int64_t last_res_15397;
            
            last_res_15397 = ((int64_t *) mem_16475)[i_15306];
            
            int64_t last_res_15398;
            
            last_res_15398 = ((int64_t *) mem_16478)[i_15306];
            
            struct memblock mem_16547;
            
            mem_16547.references = NULL;
            if (memblock_alloc(ctx, &mem_16547, bytes_16321, "mem_16547")) {
                err = 1;
                goto cleanup;
            }
            if (nubi32_res_15172 * (int64_t) 4 > 0)
                memmove(mem_16547.mem + (int64_t) 0, mem_param_16462.mem +
                        (int64_t) 0, nubi32_res_15172 * (int64_t) 4);
            
            struct memblock mem_16550;
            
            mem_16550.references = NULL;
            if (memblock_alloc(ctx, &mem_16550, bytes_16456, "mem_16550")) {
                err = 1;
                goto cleanup;
            }
            if (nubi32_res_15172 * (int64_t) 8 > 0)
                memmove(mem_16550.mem + (int64_t) 0, mem_param_16467.mem +
                        (int64_t) 0, nubi32_res_15172 * (int64_t) 8);
            for (int64_t write_iter_15848 = 0; write_iter_15848 <
                 nubi32_res_15172; write_iter_15848++) {
                int32_t write_iv_15851;
                
                write_iv_15851 = ((int32_t *) mem_16484)[write_iter_15848];
                
                int64_t write_iv_15852;
                
                write_iv_15852 = ((int64_t *) mem_16472)[write_iter_15848];
                
                int64_t write_iv_15853;
                
                write_iv_15853 = ((int64_t *) mem_16475)[write_iter_15848];
                
                int64_t write_iv_15854;
                
                write_iv_15854 = ((int64_t *) mem_16478)[write_iter_15848];
                
                int64_t write_iv_15855;
                
                write_iv_15855 = ((int64_t *) mem_16481)[write_iter_15848];
                
                bool match_lit_15410 = 0 == write_iv_15851;
                int64_t defunc_1_f_res_15411;
                
                if (match_lit_15410) {
                    int64_t case_res_15412 = sub64(write_iv_15852, (int64_t) 1);
                    
                    defunc_1_f_res_15411 = case_res_15412;
                } else {
                    bool match_lit_15413 = 1 == write_iv_15851;
                    int64_t x_15414;
                    
                    if (match_lit_15413) {
                        int64_t x_15415 = add64(last_res_15396, write_iv_15853);
                        int64_t case_res_15416 = sub64(x_15415, (int64_t) 1);
                        
                        x_15414 = case_res_15416;
                    } else {
                        bool match_lit_15417 = 2 == write_iv_15851;
                        int64_t x_15418;
                        
                        if (match_lit_15417) {
                            int64_t x_15419 = add64(last_res_15396,
                                                    last_res_15397);
                            int64_t x_15420 = add64(x_15419, write_iv_15854);
                            int64_t case_res_15421 = sub64(x_15420,
                                                           (int64_t) 1);
                            
                            x_15418 = case_res_15421;
                        } else {
                            int64_t x_15422 = add64(last_res_15396,
                                                    last_res_15397);
                            int64_t x_15423 = add64(last_res_15398, x_15422);
                            int64_t x_15424 = add64(x_15423, write_iv_15855);
                            int64_t defunc_1_f_res_res_15425 = sub64(x_15424,
                                                                     (int64_t) 1);
                            
                            x_15418 = defunc_1_f_res_res_15425;
                        }
                        x_15414 = x_15418;
                    }
                    defunc_1_f_res_15411 = x_15414;
                }
                if (sle64((int64_t) 0, defunc_1_f_res_15411) &&
                    slt64(defunc_1_f_res_15411, nubi32_res_15172)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_16547.mem + defunc_1_f_res_15411 *
                                (int64_t) 4, mem_param_16462.mem +
                                ((int64_t) 0 + (int64_t) 1 * write_iter_15848) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, defunc_1_f_res_15411) &&
                    slt64(defunc_1_f_res_15411, nubi32_res_15172)) {
                    if ((int64_t) 8 > 0)
                        memmove(mem_16550.mem + defunc_1_f_res_15411 *
                                (int64_t) 8, mem_param_16467.mem +
                                ((int64_t) 0 + (int64_t) 1 * write_iter_15848) *
                                (int64_t) 8, (int64_t) 8);
                }
            }
            
            struct memblock mem_param_tmp_17227;
            
            mem_param_tmp_17227.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_17227, &mem_16547,
                             "mem_16547") != 0)
                return 1;
            
            struct memblock mem_param_tmp_17228;
            
            mem_param_tmp_17228.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_17228, &mem_16550,
                             "mem_16550") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_16462, &mem_param_tmp_17227,
                             "mem_param_tmp_17227") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_16467, &mem_param_tmp_17228,
                             "mem_param_tmp_17228") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_17228,
                               "mem_param_tmp_17228") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_17227,
                               "mem_param_tmp_17227") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16550, "mem_16550") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16547, "mem_16547") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_16576, &mem_param_16462,
                         "mem_param_16462") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_16575, &mem_param_16467,
                         "mem_param_16467") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
            return 1;
        if (mem_16587_cached_sizze_17321 < (size_t) bytes_16321) {
            mem_16587 = realloc(mem_16587, bytes_16321);
            mem_16587_cached_sizze_17321 = bytes_16321;
        }
        if (mem_16590_cached_sizze_17322 < (size_t) bytes_16321) {
            mem_16590 = realloc(mem_16590, bytes_16321);
            mem_16590_cached_sizze_17322 = bytes_16321;
        }
        if (mem_16593_cached_sizze_17323 < (size_t) bytes_16321) {
            mem_16593 = realloc(mem_16593, bytes_16321);
            mem_16593_cached_sizze_17323 = bytes_16321;
        }
        for (int64_t i_15866 = 0; i_15866 < nubi32_res_15172; i_15866++) {
            int64_t x_15429;
            
            x_15429 = ((int64_t *) ext_mem_16575.mem)[i_15866];
            
            int32_t defunc_0_g_res_15430 = sext_i64_i32(x_15429);
            int64_t i_15431 = sext_i32_i64(defunc_0_g_res_15430);
            bool x_15432 = sle64((int64_t) 0, i_15431);
            bool y_15433 = slt64(i_15431, nubi32_res_15172);
            bool bounds_check_15434 = x_15432 && y_15433;
            bool index_certs_15435;
            
            if (!bounds_check_15434) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_15431,
                              "] out of bounds for array of shape [",
                              (long long) nubi32_res_15172, "].",
                              "-> #0  arrange.fut:45:19-26\n   #1  arrange.fut:45:8-53\n   #2  arrange.fut:50:25-84\n   #3  arrange.fut:68:5-50\n   #4  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            if ((int64_t) 4 > 0)
                memmove(mem_16587 + i_15866 * (int64_t) 4, mem_16322 +
                        ((int64_t) 0 + (int64_t) 1 * i_15431) * (int64_t) 4,
                        (int64_t) 4);
            if ((int64_t) 4 > 0)
                memmove(mem_16590 + i_15866 * (int64_t) 4, ext_mem_16315.mem +
                        ((int64_t) 0 + (int64_t) 1 * i_15431) * (int64_t) 4,
                        (int64_t) 4);
            if ((int64_t) 4 > 0)
                memmove(mem_16593 + i_15866 * (int64_t) 4, mem_16325.mem +
                        ((int64_t) 0 + (int64_t) 1 * i_15431) * (int64_t) 4,
                        (int64_t) 4);
        }
        if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
            return 1;
        if (mem_16632_cached_sizze_17324 < (size_t) bytes_16456) {
            mem_16632 = realloc(mem_16632, bytes_16456);
            mem_16632_cached_sizze_17324 = bytes_16456;
        }
        if (mem_16635_cached_sizze_17325 < (size_t) bytes_16456) {
            mem_16635 = realloc(mem_16635, bytes_16456);
            mem_16635_cached_sizze_17325 = bytes_16456;
        }
        
        int64_t discard_15880;
        int64_t scanacc_15874 = (int64_t) 0;
        
        for (int64_t i_15877 = 0; i_15877 < nubi32_res_15172; i_15877++) {
            int32_t x_15444;
            
            x_15444 = ((int32_t *) mem_16587)[i_15877];
            
            int32_t defunc_2_reduce_res_15445;
            int32_t redout_15870 = 0;
            
            for (int64_t i_15871 = 0; i_15871 < nubi32_res_15172; i_15871++) {
                int32_t x_15451;
                
                x_15451 = ((int32_t *) mem_16587)[i_15871];
                
                bool cond_15448 = x_15444 == x_15451;
                int32_t defunc_1_op_res_15449;
                
                if (cond_15448) {
                    int32_t defunc_1_op_res_t_res_15450 = add32(1,
                                                                redout_15870);
                    
                    defunc_1_op_res_15449 = defunc_1_op_res_t_res_15450;
                } else {
                    defunc_1_op_res_15449 = redout_15870;
                }
                
                int32_t redout_tmp_17248 = defunc_1_op_res_15449;
                
                redout_15870 = redout_tmp_17248;
            }
            defunc_2_reduce_res_15445 = redout_15870;
            
            bool isDuplii32_res_15452 = slt32(1, defunc_2_reduce_res_15445);
            bool cond_neg_15453 = !isDuplii32_res_15452;
            int64_t defunc_1_lifted_lambda_res_15454 =
                    btoi_bool_i64(cond_neg_15453);
            bool is_i_15455 = defunc_1_lifted_lambda_res_15454 == (int64_t) 0;
            bool cond_neg_15456 = !is_i_15455;
            int64_t part_res_15457 = btoi_bool_i64(cond_neg_15456);
            int64_t part_res_15458 = btoi_bool_i64(is_i_15455);
            int64_t zz_15443 = part_res_15458 + scanacc_15874;
            
            ((int64_t *) mem_16632)[i_15877] = zz_15443;
            ((int64_t *) mem_16635)[i_15877] = part_res_15457;
            
            int64_t scanacc_tmp_17245 = zz_15443;
            
            scanacc_15874 = scanacc_tmp_17245;
        }
        discard_15880 = scanacc_15874;
        
        int64_t partition_sizze_15459;
        
        if (cond_15303) {
            partition_sizze_15459 = (int64_t) 0;
        } else {
            int64_t last_offset_15460;
            
            last_offset_15460 = ((int64_t *) mem_16632)[i_15306];
            partition_sizze_15459 = last_offset_15460;
        }
        if (mem_16662_cached_sizze_17326 < (size_t) bytes_16321) {
            mem_16662 = realloc(mem_16662, bytes_16321);
            mem_16662_cached_sizze_17326 = bytes_16321;
        }
        for (int64_t write_iter_15881 = 0; write_iter_15881 < nubi32_res_15172;
             write_iter_15881++) {
            int64_t write_iv_15883;
            
            write_iv_15883 = ((int64_t *) mem_16635)[write_iter_15881];
            
            int64_t write_iv_15884;
            
            write_iv_15884 = ((int64_t *) mem_16632)[write_iter_15881];
            
            bool is_this_one_15466 = write_iv_15883 == (int64_t) 0;
            int64_t this_offset_15467 = (int64_t) -1 + write_iv_15884;
            int64_t total_res_15468;
            
            if (is_this_one_15466) {
                total_res_15468 = this_offset_15467;
            } else {
                total_res_15468 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, total_res_15468) && slt64(total_res_15468,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16662 + total_res_15468 * (int64_t) 4,
                            mem_16587 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15881) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        
        bool empty_slice_15469 = partition_sizze_15459 == (int64_t) 0;
        int64_t m_15470 = sub64(partition_sizze_15459, (int64_t) 1);
        bool zzero_leq_i_p_m_t_s_15471 = sle64((int64_t) 0, m_15470);
        bool i_p_m_t_s_leq_w_15472 = slt64(m_15470, nubi32_res_15172);
        bool i_lte_j_15473 = sle64((int64_t) 0, partition_sizze_15459);
        bool y_15474 = zzero_leq_i_p_m_t_s_15471 && i_p_m_t_s_leq_w_15472;
        bool y_15475 = i_lte_j_15473 && y_15474;
        bool ok_or_empty_15476 = empty_slice_15469 || y_15475;
        bool index_certs_15477;
        
        if (!ok_or_empty_15476) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [:",
                                   (long long) partition_sizze_15459,
                                   "] out of bounds for array of shape [",
                                   (long long) nubi32_res_15172, "].",
                                   "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:28:5-37\n   #2  arrange.fut:53:36-49\n   #3  arrange.fut:68:5-50\n   #4  arrange.fut:67:1-68:60\n");
            if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        int64_t ext_16740;
        int64_t ext_16737;
        struct memblock ext_mem_16736;
        
        ext_mem_16736.references = NULL;
        
        int64_t defunc_0_f_res_15478;
        int64_t loopz2082U_15481;
        int64_t ctx_param_ext_16675;
        int64_t ctx_param_ext_16678;
        struct memblock mem_param_16679;
        
        mem_param_16679.references = NULL;
        ctx_param_ext_16675 = (int64_t) 0;
        ctx_param_ext_16678 = (int64_t) 0;
        if (memblock_set(ctx, &mem_param_16679, &mem_16060, "mem_16060") != 0)
            return 1;
        loopz2082U_15481 = (int64_t) 0;
        for (int64_t i_15480 = 0; i_15480 < partition_sizze_15459; i_15480++) {
            int32_t arr_elem_15483;
            
            arr_elem_15483 = ((int32_t *) mem_16662)[i_15480];
            for (int64_t i_17255 = 0; i_17255 < (int64_t) 1; i_17255++) {
                ((int32_t *) mem_16685)[i_17255] = arr_elem_15483;
            }
            
            int64_t binop_y_16686 = (int64_t) 8 * loopz2082U_15481;
            int64_t bytes_16687 = smax64((int64_t) 0, binop_y_16686);
            
            if (mem_16688_cached_sizze_17328 < (size_t) bytes_16687) {
                mem_16688 = realloc(mem_16688, bytes_16687);
                mem_16688_cached_sizze_17328 = bytes_16687;
            }
            if (mem_16691_cached_sizze_17329 < (size_t) bytes_16687) {
                mem_16691 = realloc(mem_16691, bytes_16687);
                mem_16691_cached_sizze_17329 = bytes_16687;
            }
            
            int64_t discard_15895;
            int64_t scanacc_15889 = (int64_t) 0;
            
            for (int64_t i_15892 = 0; i_15892 < loopz2082U_15481; i_15892++) {
                int32_t x_15490;
                
                x_15490 = ((int32_t *) mem_param_16679.mem)[i_15892];
                
                bool defunc_0_p_res_15491 = x_15490 == arr_elem_15483;
                int64_t defunc_1_lifted_lambda_res_15492 =
                        btoi_bool_i64(defunc_0_p_res_15491);
                bool is_i_15493 = defunc_1_lifted_lambda_res_15492 ==
                     (int64_t) 0;
                bool cond_neg_15494 = !is_i_15493;
                int64_t part_res_15495 = btoi_bool_i64(cond_neg_15494);
                int64_t part_res_15496 = btoi_bool_i64(is_i_15493);
                int64_t zz_15489 = part_res_15496 + scanacc_15889;
                
                ((int64_t *) mem_16688)[i_15892] = zz_15489;
                ((int64_t *) mem_16691)[i_15892] = part_res_15495;
                
                int64_t scanacc_tmp_17256 = zz_15489;
                
                scanacc_15889 = scanacc_tmp_17256;
            }
            discard_15895 = scanacc_15889;
            
            int64_t last_index_15497 = loopz2082U_15481 - (int64_t) 1;
            bool is_empty_15498 = loopz2082U_15481 == (int64_t) 0;
            int64_t partition_sizze_15499;
            
            if (is_empty_15498) {
                partition_sizze_15499 = (int64_t) 0;
            } else {
                int64_t last_offset_15500;
                
                last_offset_15500 = ((int64_t *) mem_16688)[last_index_15497];
                partition_sizze_15499 = last_offset_15500;
            }
            
            int64_t binop_y_16716 = (int64_t) 4 * loopz2082U_15481;
            int64_t bytes_16717 = smax64((int64_t) 0, binop_y_16716);
            
            if (mem_16718_cached_sizze_17330 < (size_t) bytes_16717) {
                mem_16718 = realloc(mem_16718, bytes_16717);
                mem_16718_cached_sizze_17330 = bytes_16717;
            }
            for (int64_t write_iter_15896 = 0; write_iter_15896 <
                 loopz2082U_15481; write_iter_15896++) {
                int64_t write_iv_15898;
                
                write_iv_15898 = ((int64_t *) mem_16691)[write_iter_15896];
                
                int64_t write_iv_15899;
                
                write_iv_15899 = ((int64_t *) mem_16688)[write_iter_15896];
                
                bool is_this_one_15506 = write_iv_15898 == (int64_t) 0;
                int64_t this_offset_15507 = (int64_t) -1 + write_iv_15899;
                int64_t total_res_15508;
                
                if (is_this_one_15506) {
                    total_res_15508 = this_offset_15507;
                } else {
                    total_res_15508 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, total_res_15508) &&
                    slt64(total_res_15508, loopz2082U_15481)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_16718 + total_res_15508 * (int64_t) 4,
                                mem_param_16679.mem + ((int64_t) 0 +
                                                       (int64_t) 1 *
                                                       write_iter_15896) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            bool empty_slice_15509 = partition_sizze_15499 == (int64_t) 0;
            int64_t m_15510 = sub64(partition_sizze_15499, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_15511 = sle64((int64_t) 0, m_15510);
            bool i_p_m_t_s_leq_w_15512 = slt64(m_15510, loopz2082U_15481);
            bool i_lte_j_15513 = sle64((int64_t) 0, partition_sizze_15499);
            bool y_15514 = zzero_leq_i_p_m_t_s_15511 && i_p_m_t_s_leq_w_15512;
            bool y_15515 = i_lte_j_15513 && y_15514;
            bool ok_or_empty_15516 = empty_slice_15509 || y_15515;
            bool index_certs_15517;
            
            if (!ok_or_empty_15516) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [:", (long long) partition_sizze_15499,
                              "] out of bounds for array of shape [",
                              (long long) loopz2082U_15481, "].",
                              "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:11:41-61\n   #2  /prelude/functional.fut:9:42-44\n   #3  arrange.fut:53:36-59\n   #4  arrange.fut:68:5-50\n   #5  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            int64_t conc_tmp_15519 = (int64_t) 1 + partition_sizze_15499;
            int64_t binop_y_16731 = (int64_t) 4 * conc_tmp_15519;
            int64_t bytes_16732 = smax64((int64_t) 0, binop_y_16731);
            struct memblock mem_16733;
            
            mem_16733.references = NULL;
            if (memblock_alloc(ctx, &mem_16733, bytes_16732, "mem_16733")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_17260 = (int64_t) 0;
            
            if (partition_sizze_15499 * (int64_t) 4 > 0)
                memmove(mem_16733.mem + tmp_offs_17260 * (int64_t) 4,
                        mem_16718 + (int64_t) 0, partition_sizze_15499 *
                        (int64_t) 4);
            tmp_offs_17260 += partition_sizze_15499;
            if ((int64_t) 4 > 0)
                memmove(mem_16733.mem + tmp_offs_17260 * (int64_t) 4,
                        mem_16685 + (int64_t) 0, (int64_t) 4);
            tmp_offs_17260 += (int64_t) 1;
            
            int64_t ctx_param_ext_tmp_17250 = conc_tmp_15519;
            int64_t ctx_param_ext_tmp_17251 = conc_tmp_15519;
            struct memblock mem_param_tmp_17252;
            
            mem_param_tmp_17252.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_17252, &mem_16733,
                             "mem_16733") != 0)
                return 1;
            
            int64_t loopz2082U_tmp_17253 = conc_tmp_15519;
            
            ctx_param_ext_16675 = ctx_param_ext_tmp_17250;
            ctx_param_ext_16678 = ctx_param_ext_tmp_17251;
            if (memblock_set(ctx, &mem_param_16679, &mem_param_tmp_17252,
                             "mem_param_tmp_17252") != 0)
                return 1;
            loopz2082U_15481 = loopz2082U_tmp_17253;
            if (memblock_unref(ctx, &mem_param_tmp_17252,
                               "mem_param_tmp_17252") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16733, "mem_16733") != 0)
                return 1;
        }
        ext_16740 = ctx_param_ext_16675;
        ext_16737 = ctx_param_ext_16678;
        if (memblock_set(ctx, &ext_mem_16736, &mem_param_16679,
                         "mem_param_16679") != 0)
            return 1;
        defunc_0_f_res_15478 = loopz2082U_15481;
        if (mem_16743_cached_sizze_17331 < (size_t) bytes_16456) {
            mem_16743 = realloc(mem_16743, bytes_16456);
            mem_16743_cached_sizze_17331 = bytes_16456;
        }
        if (mem_16746_cached_sizze_17332 < (size_t) bytes_16456) {
            mem_16746 = realloc(mem_16746, bytes_16456);
            mem_16746_cached_sizze_17332 = bytes_16456;
        }
        
        int64_t discard_15912;
        int64_t scanacc_15906 = (int64_t) 0;
        
        for (int64_t i_15909 = 0; i_15909 < nubi32_res_15172; i_15909++) {
            int32_t x_15526;
            
            x_15526 = ((int32_t *) mem_16587)[i_15909];
            
            bool defunc_2_reduce_res_15527;
            bool redout_15902 = 0;
            
            for (int64_t i_15903 = 0; i_15903 < defunc_0_f_res_15478;
                 i_15903++) {
                int32_t x_15531;
                
                x_15531 = ((int32_t *) ext_mem_16736.mem)[i_15903];
                
                bool defunc_0_f_res_15532 = x_15531 == x_15526;
                bool defunc_1_op_res_15530 = defunc_0_f_res_15532 ||
                     redout_15902;
                bool redout_tmp_17264 = defunc_1_op_res_15530;
                
                redout_15902 = redout_tmp_17264;
            }
            defunc_2_reduce_res_15527 = redout_15902;
            
            int64_t defunc_1_lifted_lambda_res_15533 =
                    btoi_bool_i64(defunc_2_reduce_res_15527);
            bool is_i_15534 = defunc_1_lifted_lambda_res_15533 == (int64_t) 0;
            bool cond_neg_15535 = !is_i_15534;
            int64_t part_res_15536 = btoi_bool_i64(cond_neg_15535);
            int64_t part_res_15537 = btoi_bool_i64(is_i_15534);
            int64_t zz_15525 = part_res_15537 + scanacc_15906;
            
            ((int64_t *) mem_16743)[i_15909] = zz_15525;
            ((int64_t *) mem_16746)[i_15909] = part_res_15536;
            
            int64_t scanacc_tmp_17261 = zz_15525;
            
            scanacc_15906 = scanacc_tmp_17261;
        }
        discard_15912 = scanacc_15906;
        
        int64_t partition_sizze_15538;
        
        if (cond_15303) {
            partition_sizze_15538 = (int64_t) 0;
        } else {
            int64_t last_offset_15539;
            
            last_offset_15539 = ((int64_t *) mem_16743)[i_15306];
            partition_sizze_15538 = last_offset_15539;
        }
        if (mem_16773_cached_sizze_17333 < (size_t) bytes_16321) {
            mem_16773 = realloc(mem_16773, bytes_16321);
            mem_16773_cached_sizze_17333 = bytes_16321;
        }
        if (mem_16776_cached_sizze_17334 < (size_t) bytes_16321) {
            mem_16776 = realloc(mem_16776, bytes_16321);
            mem_16776_cached_sizze_17334 = bytes_16321;
        }
        if (mem_16779_cached_sizze_17335 < (size_t) bytes_16321) {
            mem_16779 = realloc(mem_16779, bytes_16321);
            mem_16779_cached_sizze_17335 = bytes_16321;
        }
        for (int64_t write_iter_15913 = 0; write_iter_15913 < nubi32_res_15172;
             write_iter_15913++) {
            int64_t write_iv_15917;
            
            write_iv_15917 = ((int64_t *) mem_16746)[write_iter_15913];
            
            int64_t write_iv_15918;
            
            write_iv_15918 = ((int64_t *) mem_16743)[write_iter_15913];
            
            bool is_this_one_15551 = write_iv_15917 == (int64_t) 0;
            int64_t this_offset_15552 = (int64_t) -1 + write_iv_15918;
            int64_t total_res_15553;
            
            if (is_this_one_15551) {
                total_res_15553 = this_offset_15552;
            } else {
                total_res_15553 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, total_res_15553) && slt64(total_res_15553,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16773 + total_res_15553 * (int64_t) 4,
                            mem_16587 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15913) * (int64_t) 4,
                            (int64_t) 4);
            }
            if (sle64((int64_t) 0, total_res_15553) && slt64(total_res_15553,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16776 + total_res_15553 * (int64_t) 4,
                            mem_16590 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15913) * (int64_t) 4,
                            (int64_t) 4);
            }
            if (sle64((int64_t) 0, total_res_15553) && slt64(total_res_15553,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16779 + total_res_15553 * (int64_t) 4,
                            mem_16593 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15913) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        
        bool empty_slice_15554 = partition_sizze_15538 == (int64_t) 0;
        int64_t m_15555 = sub64(partition_sizze_15538, (int64_t) 1);
        bool zzero_leq_i_p_m_t_s_15556 = sle64((int64_t) 0, m_15555);
        bool i_p_m_t_s_leq_w_15557 = slt64(m_15555, nubi32_res_15172);
        bool i_lte_j_15558 = sle64((int64_t) 0, partition_sizze_15538);
        bool y_15559 = zzero_leq_i_p_m_t_s_15556 && i_p_m_t_s_leq_w_15557;
        bool y_15560 = i_lte_j_15558 && y_15559;
        bool ok_or_empty_15561 = empty_slice_15554 || y_15560;
        bool index_certs_15562;
        
        if (!ok_or_empty_15561) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [:",
                                   (long long) partition_sizze_15538,
                                   "] out of bounds for array of shape [",
                                   (long long) nubi32_res_15172, "].",
                                   "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:54:41-108\n   #2  arrange.fut:68:5-50\n   #3  arrange.fut:67:1-68:60\n");
            if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        if (mem_16818_cached_sizze_17336 < (size_t) bytes_16456) {
            mem_16818 = realloc(mem_16818, bytes_16456);
            mem_16818_cached_sizze_17336 = bytes_16456;
        }
        if (mem_16821_cached_sizze_17337 < (size_t) bytes_16456) {
            mem_16821 = realloc(mem_16821, bytes_16456);
            mem_16821_cached_sizze_17337 = bytes_16456;
        }
        
        int64_t discard_15935;
        int64_t scanacc_15929 = (int64_t) 0;
        
        for (int64_t i_15932 = 0; i_15932 < nubi32_res_15172; i_15932++) {
            int32_t x_15571;
            
            x_15571 = ((int32_t *) mem_16587)[i_15932];
            
            bool defunc_2_reduce_res_15572;
            bool redout_15925 = 0;
            
            for (int64_t i_15926 = 0; i_15926 < defunc_0_f_res_15478;
                 i_15926++) {
                int32_t x_15576;
                
                x_15576 = ((int32_t *) ext_mem_16736.mem)[i_15926];
                
                bool defunc_0_f_res_15577 = x_15576 == x_15571;
                bool defunc_1_op_res_15575 = defunc_0_f_res_15577 ||
                     redout_15925;
                bool redout_tmp_17271 = defunc_1_op_res_15575;
                
                redout_15925 = redout_tmp_17271;
            }
            defunc_2_reduce_res_15572 = redout_15925;
            
            bool cond_neg_15578 = !defunc_2_reduce_res_15572;
            int64_t defunc_1_lifted_lambda_res_15579 =
                    btoi_bool_i64(cond_neg_15578);
            bool is_i_15580 = defunc_1_lifted_lambda_res_15579 == (int64_t) 0;
            bool cond_neg_15581 = !is_i_15580;
            int64_t part_res_15582 = btoi_bool_i64(cond_neg_15581);
            int64_t part_res_15583 = btoi_bool_i64(is_i_15580);
            int64_t zz_15570 = part_res_15583 + scanacc_15929;
            
            ((int64_t *) mem_16818)[i_15932] = zz_15570;
            ((int64_t *) mem_16821)[i_15932] = part_res_15582;
            
            int64_t scanacc_tmp_17268 = zz_15570;
            
            scanacc_15929 = scanacc_tmp_17268;
        }
        discard_15935 = scanacc_15929;
        
        int64_t partition_sizze_15584;
        
        if (cond_15303) {
            partition_sizze_15584 = (int64_t) 0;
        } else {
            int64_t last_offset_15585;
            
            last_offset_15585 = ((int64_t *) mem_16818)[i_15306];
            partition_sizze_15584 = last_offset_15585;
        }
        if (mem_16848_cached_sizze_17338 < (size_t) bytes_16321) {
            mem_16848 = realloc(mem_16848, bytes_16321);
            mem_16848_cached_sizze_17338 = bytes_16321;
        }
        if (mem_16851_cached_sizze_17339 < (size_t) bytes_16321) {
            mem_16851 = realloc(mem_16851, bytes_16321);
            mem_16851_cached_sizze_17339 = bytes_16321;
        }
        if (mem_16854_cached_sizze_17340 < (size_t) bytes_16321) {
            mem_16854 = realloc(mem_16854, bytes_16321);
            mem_16854_cached_sizze_17340 = bytes_16321;
        }
        for (int64_t write_iter_15936 = 0; write_iter_15936 < nubi32_res_15172;
             write_iter_15936++) {
            int64_t write_iv_15940;
            
            write_iv_15940 = ((int64_t *) mem_16821)[write_iter_15936];
            
            int64_t write_iv_15941;
            
            write_iv_15941 = ((int64_t *) mem_16818)[write_iter_15936];
            
            bool is_this_one_15597 = write_iv_15940 == (int64_t) 0;
            int64_t this_offset_15598 = (int64_t) -1 + write_iv_15941;
            int64_t total_res_15599;
            
            if (is_this_one_15597) {
                total_res_15599 = this_offset_15598;
            } else {
                total_res_15599 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, total_res_15599) && slt64(total_res_15599,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16848 + total_res_15599 * (int64_t) 4,
                            mem_16587 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15936) * (int64_t) 4,
                            (int64_t) 4);
            }
            if (sle64((int64_t) 0, total_res_15599) && slt64(total_res_15599,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16851 + total_res_15599 * (int64_t) 4,
                            mem_16590 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15936) * (int64_t) 4,
                            (int64_t) 4);
            }
            if (sle64((int64_t) 0, total_res_15599) && slt64(total_res_15599,
                                                             nubi32_res_15172)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_16854 + total_res_15599 * (int64_t) 4,
                            mem_16593 + ((int64_t) 0 + (int64_t) 1 *
                                         write_iter_15936) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        
        bool empty_slice_15600 = partition_sizze_15584 == (int64_t) 0;
        int64_t m_15601 = sub64(partition_sizze_15584, (int64_t) 1);
        bool zzero_leq_i_p_m_t_s_15602 = sle64((int64_t) 0, m_15601);
        bool i_p_m_t_s_leq_w_15603 = slt64(m_15601, nubi32_res_15172);
        bool i_lte_j_15604 = sle64((int64_t) 0, partition_sizze_15584);
        bool y_15605 = zzero_leq_i_p_m_t_s_15602 && i_p_m_t_s_leq_w_15603;
        bool y_15606 = i_lte_j_15604 && y_15605;
        bool ok_or_empty_15607 = empty_slice_15600 || y_15606;
        bool index_certs_15608;
        
        if (!ok_or_empty_15607) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [:",
                                   (long long) partition_sizze_15584,
                                   "] out of bounds for array of shape [",
                                   (long long) nubi32_res_15172, "].",
                                   "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:55:38-98\n   #2  arrange.fut:68:5-50\n   #3  arrange.fut:67:1-68:60\n");
            if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_16891 = (int64_t) 4 * defunc_0_f_res_15478;
        int64_t bytes_16892 = smax64((int64_t) 0, binop_y_16891);
        
        if (mem_16893_cached_sizze_17341 < (size_t) bytes_16892) {
            mem_16893 = realloc(mem_16893, bytes_16892);
            mem_16893_cached_sizze_17341 = bytes_16892;
        }
        if (mem_16896_cached_sizze_17342 < (size_t) bytes_16892) {
            mem_16896 = realloc(mem_16896, bytes_16892);
            mem_16896_cached_sizze_17342 = bytes_16892;
        }
        if (mem_16899_cached_sizze_17343 < (size_t) bytes_16892) {
            mem_16899 = realloc(mem_16899, bytes_16892);
            mem_16899_cached_sizze_17343 = bytes_16892;
        }
        
        int64_t binop_y_16921 = (int64_t) 8 * partition_sizze_15584;
        int64_t bytes_16922 = smax64((int64_t) 0, binop_y_16921);
        
        if (mem_16923_cached_sizze_17344 < (size_t) bytes_16922) {
            mem_16923 = realloc(mem_16923, bytes_16922);
            mem_16923_cached_sizze_17344 = bytes_16922;
        }
        if (mem_16926_cached_sizze_17345 < (size_t) bytes_16922) {
            mem_16926 = realloc(mem_16926, bytes_16922);
            mem_16926_cached_sizze_17345 = bytes_16922;
        }
        if (mem_16953_cached_sizze_17346 < (size_t) bytes_16922) {
            mem_16953 = realloc(mem_16953, bytes_16922);
            mem_16953_cached_sizze_17346 = bytes_16922;
        }
        for (int64_t i_15974 = 0; i_15974 < defunc_0_f_res_15478; i_15974++) {
            int32_t x_15614;
            
            x_15614 = ((int32_t *) ext_mem_16736.mem)[i_15974];
            
            int64_t discard_15956;
            int64_t scanacc_15950 = (int64_t) 0;
            
            for (int64_t i_15953 = 0; i_15953 < partition_sizze_15584;
                 i_15953++) {
                int32_t x_15620;
                
                x_15620 = ((int32_t *) mem_16848)[i_15953];
                
                bool defunc_0_p_res_15621 = x_15620 == x_15614;
                bool cond_neg_15622 = !defunc_0_p_res_15621;
                int64_t defunc_1_lifted_lambda_res_15623 =
                        btoi_bool_i64(cond_neg_15622);
                bool is_i_15624 = defunc_1_lifted_lambda_res_15623 ==
                     (int64_t) 0;
                bool cond_neg_15625 = !is_i_15624;
                int64_t part_res_15626 = btoi_bool_i64(cond_neg_15625);
                int64_t part_res_15627 = btoi_bool_i64(is_i_15624);
                int64_t zz_15619 = part_res_15627 + scanacc_15950;
                
                ((int64_t *) mem_16923)[i_15953] = zz_15619;
                ((int64_t *) mem_16926)[i_15953] = part_res_15626;
                
                int64_t scanacc_tmp_17278 = zz_15619;
                
                scanacc_15950 = scanacc_tmp_17278;
            }
            discard_15956 = scanacc_15950;
            
            int64_t partition_sizze_15628;
            
            if (empty_slice_15600) {
                partition_sizze_15628 = (int64_t) 0;
            } else {
                int64_t last_offset_15629;
                
                last_offset_15629 = ((int64_t *) mem_16923)[m_15601];
                partition_sizze_15628 = last_offset_15629;
            }
            for (int64_t write_iter_15957 = 0; write_iter_15957 <
                 partition_sizze_15584; write_iter_15957++) {
                int64_t write_iv_15959;
                
                write_iv_15959 = ((int64_t *) mem_16926)[write_iter_15957];
                
                int64_t write_iv_15960;
                
                write_iv_15960 = ((int64_t *) mem_16923)[write_iter_15957];
                
                bool is_this_one_15636 = write_iv_15959 == (int64_t) 0;
                int64_t this_offset_15637 = (int64_t) -1 + write_iv_15960;
                int64_t total_res_15638;
                
                if (is_this_one_15636) {
                    total_res_15638 = this_offset_15637;
                } else {
                    total_res_15638 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, total_res_15638) &&
                    slt64(total_res_15638, partition_sizze_15584)) {
                    ((int64_t *) mem_16953)[total_res_15638] = write_iter_15957;
                }
            }
            
            bool empty_slice_15639 = partition_sizze_15628 == (int64_t) 0;
            int64_t m_15640 = sub64(partition_sizze_15628, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_15641 = sle64((int64_t) 0, m_15640);
            bool i_p_m_t_s_leq_w_15642 = slt64(m_15640, partition_sizze_15584);
            bool i_lte_j_15643 = sle64((int64_t) 0, partition_sizze_15628);
            bool y_15644 = zzero_leq_i_p_m_t_s_15641 && i_p_m_t_s_leq_w_15642;
            bool y_15645 = i_lte_j_15643 && y_15644;
            bool ok_or_empty_15646 = empty_slice_15639 || y_15645;
            bool index_certs_15647;
            
            if (!ok_or_empty_15646) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [:", (long long) partition_sizze_15628,
                              "] out of bounds for array of shape [",
                              (long long) partition_sizze_15584, "].",
                              "-> #0  /prelude/soacs.fut:163:6-16\n   #1  /prelude/functional.fut:9:42-44\n   #2  arrange.fut:14:5-15:32\n   #3  arrange.fut:25:5-25\n   #4  arrange.fut:57:80-131\n   #5  arrange.fut:57:46-154\n   #6  arrange.fut:68:5-50\n   #7  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_16966 = (int64_t) 4 * partition_sizze_15628;
            int64_t bytes_16967 = smax64((int64_t) 0, binop_y_16966);
            
            if (mem_16968_cached_sizze_17347 < (size_t) bytes_16967) {
                mem_16968 = realloc(mem_16968, bytes_16967);
                mem_16968_cached_sizze_17347 = bytes_16967;
            }
            for (int64_t i_15966 = 0; i_15966 < partition_sizze_15628;
                 i_15966++) {
                int64_t x_15650;
                
                x_15650 = ((int64_t *) mem_16953)[i_15966];
                
                int32_t defunc_0_g_res_15651 = sext_i64_i32(x_15650);
                
                ((int32_t *) mem_16968)[i_15966] = defunc_0_g_res_15651;
            }
            
            bool y_15652 = slt64((int64_t) 0, partition_sizze_15628);
            bool index_certs_15653;
            
            if (!y_15652) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) (int64_t) 0,
                              "] out of bounds for array of shape [",
                              (long long) partition_sizze_15628, "].",
                              "-> #0  /prelude/array.fut:21:29-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  arrange.fut:25:5-33\n   #3  arrange.fut:57:80-131\n   #4  arrange.fut:57:46-154\n   #5  arrange.fut:68:5-50\n   #6  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            
            int32_t defunc_0_f_res_15654;
            
            defunc_0_f_res_15654 = ((int32_t *) mem_16968)[(int64_t) 0];
            
            int64_t i_15655 = sext_i32_i64(defunc_0_f_res_15654);
            bool x_15656 = sle64((int64_t) 0, i_15655);
            bool y_15657 = slt64(i_15655, partition_sizze_15584);
            bool bounds_check_15658 = x_15656 && y_15657;
            bool index_certs_15659;
            
            if (!bounds_check_15658) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_15655,
                              "] out of bounds for array of shape [",
                              (long long) partition_sizze_15584, "].",
                              "-> #0  arrange.fut:57:57-132\n   #1  arrange.fut:57:46-154\n   #2  arrange.fut:68:5-50\n   #3  arrange.fut:67:1-68:60\n");
                if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") !=
                    0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                    return 1;
                err = 1;
                goto cleanup;
            }
            if ((int64_t) 4 > 0)
                memmove(mem_16893 + i_15974 * (int64_t) 4, mem_16848 +
                        ((int64_t) 0 + (int64_t) 1 * i_15655) * (int64_t) 4,
                        (int64_t) 4);
            if ((int64_t) 4 > 0)
                memmove(mem_16896 + i_15974 * (int64_t) 4, mem_16851 +
                        ((int64_t) 0 + (int64_t) 1 * i_15655) * (int64_t) 4,
                        (int64_t) 4);
            if ((int64_t) 4 > 0)
                memmove(mem_16899 + i_15974 * (int64_t) 4, mem_16854 +
                        ((int64_t) 0 + (int64_t) 1 * i_15655) * (int64_t) 4,
                        (int64_t) 4);
        }
        if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
            return 1;
        
        int64_t conc_tmp_15663 = loopz2084U_15037 + partition_sizze_15538;
        int64_t conc_tmp_15664 = defunc_0_f_res_15478 + conc_tmp_15663;
        int64_t binop_y_16996 = (int64_t) 4 * conc_tmp_15664;
        int64_t bytes_16997 = smax64((int64_t) 0, binop_y_16996);
        struct memblock mem_16998;
        
        mem_16998.references = NULL;
        if (memblock_alloc(ctx, &mem_16998, bytes_16997, "mem_16998")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_17283 = (int64_t) 0;
        
        if (loopz2084U_15037 * (int64_t) 4 > 0)
            memmove(mem_16998.mem + tmp_offs_17283 * (int64_t) 4,
                    mem_param_16080.mem + (int64_t) 0, loopz2084U_15037 *
                    (int64_t) 4);
        tmp_offs_17283 += loopz2084U_15037;
        if (partition_sizze_15538 * (int64_t) 4 > 0)
            memmove(mem_16998.mem + tmp_offs_17283 * (int64_t) 4, mem_16773 +
                    (int64_t) 0, partition_sizze_15538 * (int64_t) 4);
        tmp_offs_17283 += partition_sizze_15538;
        if (defunc_0_f_res_15478 * (int64_t) 4 > 0)
            memmove(mem_16998.mem + tmp_offs_17283 * (int64_t) 4, mem_16893 +
                    (int64_t) 0, defunc_0_f_res_15478 * (int64_t) 4);
        tmp_offs_17283 += defunc_0_f_res_15478;
        
        struct memblock mem_17001;
        
        mem_17001.references = NULL;
        if (memblock_alloc(ctx, &mem_17001, bytes_16997, "mem_17001")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_17284 = (int64_t) 0;
        
        if (loopz2084U_15037 * (int64_t) 4 > 0)
            memmove(mem_17001.mem + tmp_offs_17284 * (int64_t) 4,
                    mem_param_16085.mem + (int64_t) 0, loopz2084U_15037 *
                    (int64_t) 4);
        tmp_offs_17284 += loopz2084U_15037;
        if (partition_sizze_15538 * (int64_t) 4 > 0)
            memmove(mem_17001.mem + tmp_offs_17284 * (int64_t) 4, mem_16776 +
                    (int64_t) 0, partition_sizze_15538 * (int64_t) 4);
        tmp_offs_17284 += partition_sizze_15538;
        if (defunc_0_f_res_15478 * (int64_t) 4 > 0)
            memmove(mem_17001.mem + tmp_offs_17284 * (int64_t) 4, mem_16896 +
                    (int64_t) 0, defunc_0_f_res_15478 * (int64_t) 4);
        tmp_offs_17284 += defunc_0_f_res_15478;
        
        struct memblock mem_17004;
        
        mem_17004.references = NULL;
        if (memblock_alloc(ctx, &mem_17004, bytes_16997, "mem_17004")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_17285 = (int64_t) 0;
        
        if (loopz2084U_15037 * (int64_t) 4 > 0)
            memmove(mem_17004.mem + tmp_offs_17285 * (int64_t) 4,
                    mem_param_16090.mem + (int64_t) 0, loopz2084U_15037 *
                    (int64_t) 4);
        tmp_offs_17285 += loopz2084U_15037;
        if (partition_sizze_15538 * (int64_t) 4 > 0)
            memmove(mem_17004.mem + tmp_offs_17285 * (int64_t) 4, mem_16779 +
                    (int64_t) 0, partition_sizze_15538 * (int64_t) 4);
        tmp_offs_17285 += partition_sizze_15538;
        if (defunc_0_f_res_15478 * (int64_t) 4 > 0)
            memmove(mem_17004.mem + tmp_offs_17285 * (int64_t) 4, mem_16899 +
                    (int64_t) 0, defunc_0_f_res_15478 * (int64_t) 4);
        tmp_offs_17285 += defunc_0_f_res_15478;
        if (mem_17007_cached_sizze_17348 < (size_t) bytes_16110) {
            mem_17007 = realloc(mem_17007, bytes_16110);
            mem_17007_cached_sizze_17348 = bytes_16110;
        }
        if (mem_17010_cached_sizze_17349 < (size_t) bytes_16110) {
            mem_17010 = realloc(mem_17010, bytes_16110);
            mem_17010_cached_sizze_17349 = bytes_16110;
        }
        
        int64_t discard_15990;
        int64_t scanacc_15984 = (int64_t) 0;
        
        for (int64_t i_15987 = 0; i_15987 < loopz2083U_15036; i_15987++) {
            int32_t x_15673;
            
            x_15673 = ((int32_t *) mem_param_16065.mem)[i_15987];
            
            int32_t x_15674;
            
            x_15674 = ((int32_t *) mem_param_16070.mem)[i_15987];
            
            bool defunc_2_reduce_res_15675;
            bool redout_15978 = 0;
            
            for (int64_t i_15979 = 0; i_15979 < conc_tmp_15664; i_15979++) {
                bool index_concat_cmp_16019 = sle64(conc_tmp_15663, i_15979);
                int32_t index_concat_branch_16027;
                
                if (index_concat_cmp_16019) {
                    int64_t index_concat_i_16020 = sub64(i_15979,
                                                         conc_tmp_15663);
                    int32_t index_concat_16021;
                    
                    index_concat_16021 =
                        ((int32_t *) mem_16893)[index_concat_i_16020];
                    index_concat_branch_16027 = index_concat_16021;
                } else {
                    bool index_concat_cmp_16022 = sle64(loopz2084U_15037,
                                                        i_15979);
                    int32_t index_concat_branch_16026;
                    
                    if (index_concat_cmp_16022) {
                        int64_t index_concat_i_16023 = sub64(i_15979,
                                                             loopz2084U_15037);
                        int32_t index_concat_16024;
                        
                        index_concat_16024 =
                            ((int32_t *) mem_16773)[index_concat_i_16023];
                        index_concat_branch_16026 = index_concat_16024;
                    } else {
                        int32_t index_concat_16025;
                        
                        index_concat_16025 =
                            ((int32_t *) mem_param_16080.mem)[i_15979];
                        index_concat_branch_16026 = index_concat_16025;
                    }
                    index_concat_branch_16027 = index_concat_branch_16026;
                }
                
                bool defunc_0_f_res_15680 = index_concat_branch_16027 ==
                     x_15673;
                bool defunc_1_op_res_15678 = defunc_0_f_res_15680 ||
                     redout_15978;
                bool redout_tmp_17289 = defunc_1_op_res_15678;
                
                redout_15978 = redout_tmp_17289;
            }
            defunc_2_reduce_res_15675 = redout_15978;
            
            bool not_res_15681 = !defunc_2_reduce_res_15675;
            bool defunc_0_p_res_15682;
            
            if (not_res_15681) {
                bool defunc_2_reduce_res_15683;
                bool redout_15980 = 0;
                
                for (int64_t i_15981 = 0; i_15981 < conc_tmp_15664; i_15981++) {
                    bool index_concat_cmp_16008 = sle64(conc_tmp_15663,
                                                        i_15981);
                    int32_t index_concat_branch_16016;
                    
                    if (index_concat_cmp_16008) {
                        int64_t index_concat_i_16009 = sub64(i_15981,
                                                             conc_tmp_15663);
                        int32_t index_concat_16010;
                        
                        index_concat_16010 =
                            ((int32_t *) mem_16896)[index_concat_i_16009];
                        index_concat_branch_16016 = index_concat_16010;
                    } else {
                        bool index_concat_cmp_16011 = sle64(loopz2084U_15037,
                                                            i_15981);
                        int32_t index_concat_branch_16015;
                        
                        if (index_concat_cmp_16011) {
                            int64_t index_concat_i_16012 = sub64(i_15981,
                                                                 loopz2084U_15037);
                            int32_t index_concat_16013;
                            
                            index_concat_16013 =
                                ((int32_t *) mem_16776)[index_concat_i_16012];
                            index_concat_branch_16015 = index_concat_16013;
                        } else {
                            int32_t index_concat_16014;
                            
                            index_concat_16014 =
                                ((int32_t *) mem_param_16085.mem)[i_15981];
                            index_concat_branch_16015 = index_concat_16014;
                        }
                        index_concat_branch_16016 = index_concat_branch_16015;
                    }
                    
                    bool defunc_0_f_res_15688 = index_concat_branch_16016 ==
                         x_15674;
                    bool defunc_1_op_res_15686 = defunc_0_f_res_15688 ||
                         redout_15980;
                    bool redout_tmp_17290 = defunc_1_op_res_15686;
                    
                    redout_15980 = redout_tmp_17290;
                }
                defunc_2_reduce_res_15683 = redout_15980;
                
                bool not_res_15689 = !defunc_2_reduce_res_15683;
                
                defunc_0_p_res_15682 = not_res_15689;
            } else {
                defunc_0_p_res_15682 = 0;
            }
            
            bool cond_neg_15690 = !defunc_0_p_res_15682;
            int64_t defunc_1_lifted_lambda_res_15691 =
                    btoi_bool_i64(cond_neg_15690);
            bool is_i_15692 = defunc_1_lifted_lambda_res_15691 == (int64_t) 0;
            bool cond_neg_15693 = !is_i_15692;
            int64_t part_res_15694 = btoi_bool_i64(cond_neg_15693);
            int64_t part_res_15695 = btoi_bool_i64(is_i_15692);
            int64_t zz_15672 = part_res_15695 + scanacc_15984;
            
            ((int64_t *) mem_17007)[i_15987] = zz_15672;
            ((int64_t *) mem_17010)[i_15987] = part_res_15694;
            
            int64_t scanacc_tmp_17286 = zz_15672;
            
            scanacc_15984 = scanacc_tmp_17286;
        }
        discard_15990 = scanacc_15984;
        
        int64_t partition_sizze_15696;
        
        if (cond_15046) {
            partition_sizze_15696 = (int64_t) 0;
        } else {
            int64_t last_offset_15697;
            
            last_offset_15697 = ((int64_t *) mem_17007)[i_15049];
            partition_sizze_15696 = last_offset_15697;
        }
        
        struct memblock mem_17037;
        
        mem_17037.references = NULL;
        if (memblock_alloc(ctx, &mem_17037, bytes_16240, "mem_17037")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock mem_17040;
        
        mem_17040.references = NULL;
        if (memblock_alloc(ctx, &mem_17040, bytes_16240, "mem_17040")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock mem_17043;
        
        mem_17043.references = NULL;
        if (memblock_alloc(ctx, &mem_17043, bytes_16240, "mem_17043")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t write_iter_15991 = 0; write_iter_15991 < loopz2083U_15036;
             write_iter_15991++) {
            int64_t write_iv_15995;
            
            write_iv_15995 = ((int64_t *) mem_17010)[write_iter_15991];
            
            int64_t write_iv_15996;
            
            write_iv_15996 = ((int64_t *) mem_17007)[write_iter_15991];
            
            bool is_this_one_15709 = write_iv_15995 == (int64_t) 0;
            int64_t this_offset_15710 = (int64_t) -1 + write_iv_15996;
            int64_t total_res_15711;
            
            if (is_this_one_15709) {
                total_res_15711 = this_offset_15710;
            } else {
                total_res_15711 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, total_res_15711) && slt64(total_res_15711,
                                                             loopz2083U_15036)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_17037.mem + total_res_15711 * (int64_t) 4,
                            mem_param_16065.mem + ((int64_t) 0 + (int64_t) 1 *
                                                   write_iter_15991) *
                            (int64_t) 4, (int64_t) 4);
            }
            if (sle64((int64_t) 0, total_res_15711) && slt64(total_res_15711,
                                                             loopz2083U_15036)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_17040.mem + total_res_15711 * (int64_t) 4,
                            mem_param_16070.mem + ((int64_t) 0 + (int64_t) 1 *
                                                   write_iter_15991) *
                            (int64_t) 4, (int64_t) 4);
            }
            if (sle64((int64_t) 0, total_res_15711) && slt64(total_res_15711,
                                                             loopz2083U_15036)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_17043.mem + total_res_15711 * (int64_t) 4,
                            mem_param_16075.mem + ((int64_t) 0 + (int64_t) 1 *
                                                   write_iter_15991) *
                            (int64_t) 4, (int64_t) 4);
            }
        }
        
        bool empty_slice_15712 = partition_sizze_15696 == (int64_t) 0;
        int64_t m_15713 = sub64(partition_sizze_15696, (int64_t) 1);
        bool zzero_leq_i_p_m_t_s_15714 = sle64((int64_t) 0, m_15713);
        bool i_p_m_t_s_leq_w_15715 = slt64(m_15713, loopz2083U_15036);
        bool i_lte_j_15716 = sle64((int64_t) 0, partition_sizze_15696);
        bool y_15717 = zzero_leq_i_p_m_t_s_15714 && i_p_m_t_s_leq_w_15715;
        bool y_15718 = i_lte_j_15716 && y_15717;
        bool ok_or_empty_15719 = empty_slice_15712 || y_15718;
        bool index_certs_15720;
        
        if (!ok_or_empty_15719) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [:",
                                   (long long) partition_sizze_15696,
                                   "] out of bounds for array of shape [",
                                   (long long) loopz2083U_15036, "].",
                                   "-> #0  /prelude/soacs.fut:163:6-16\n   #1  arrange.fut:62:25-102\n   #2  arrange.fut:68:5-50\n   #3  arrange.fut:67:1-68:60\n");
            if (memblock_unref(ctx, &mem_17043, "mem_17043") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_17040, "mem_17040") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_17037, "mem_17037") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_17004, "mem_17004") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_17001, "mem_17001") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16998, "mem_16998") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
                return 1;
            err = 1;
            goto cleanup;
        }
        
        bool loop_cond_15724 = slt64((int64_t) 0, partition_sizze_15696);
        int64_t ctx_param_ext_tmp_17155 = loopz2083U_15036;
        int64_t ctx_param_ext_tmp_17156 = partition_sizze_15696;
        int64_t ctx_param_ext_tmp_17157 = loopz2083U_15036;
        int64_t ctx_param_ext_tmp_17158 = partition_sizze_15696;
        int64_t ctx_param_ext_tmp_17159 = loopz2083U_15036;
        int64_t ctx_param_ext_tmp_17160 = partition_sizze_15696;
        int64_t ctx_param_ext_tmp_17161 = conc_tmp_15664;
        int64_t ctx_param_ext_tmp_17162 = conc_tmp_15664;
        int64_t ctx_param_ext_tmp_17163 = conc_tmp_15664;
        int64_t ctx_param_ext_tmp_17164 = conc_tmp_15664;
        int64_t ctx_param_ext_tmp_17165 = conc_tmp_15664;
        int64_t ctx_param_ext_tmp_17166 = conc_tmp_15664;
        struct memblock mem_param_tmp_17167;
        
        mem_param_tmp_17167.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_17167, &mem_17037, "mem_17037") !=
            0)
            return 1;
        
        struct memblock mem_param_tmp_17168;
        
        mem_param_tmp_17168.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_17168, &mem_17040, "mem_17040") !=
            0)
            return 1;
        
        struct memblock mem_param_tmp_17169;
        
        mem_param_tmp_17169.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_17169, &mem_17043, "mem_17043") !=
            0)
            return 1;
        
        struct memblock mem_param_tmp_17170;
        
        mem_param_tmp_17170.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_17170, &mem_16998, "mem_16998") !=
            0)
            return 1;
        
        struct memblock mem_param_tmp_17171;
        
        mem_param_tmp_17171.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_17171, &mem_17001, "mem_17001") !=
            0)
            return 1;
        
        struct memblock mem_param_tmp_17172;
        
        mem_param_tmp_17172.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_17172, &mem_17004, "mem_17004") !=
            0)
            return 1;
        
        int64_t loopz2083U_tmp_17173 = partition_sizze_15696;
        int64_t loopz2084U_tmp_17174 = conc_tmp_15664;
        bool loop_while_tmp_17175 = loop_cond_15724;
        
        ctx_param_ext_16061 = ctx_param_ext_tmp_17155;
        ctx_param_ext_16064 = ctx_param_ext_tmp_17156;
        ctx_param_ext_16066 = ctx_param_ext_tmp_17157;
        ctx_param_ext_16069 = ctx_param_ext_tmp_17158;
        ctx_param_ext_16071 = ctx_param_ext_tmp_17159;
        ctx_param_ext_16074 = ctx_param_ext_tmp_17160;
        ctx_param_ext_16076 = ctx_param_ext_tmp_17161;
        ctx_param_ext_16079 = ctx_param_ext_tmp_17162;
        ctx_param_ext_16081 = ctx_param_ext_tmp_17163;
        ctx_param_ext_16084 = ctx_param_ext_tmp_17164;
        ctx_param_ext_16086 = ctx_param_ext_tmp_17165;
        ctx_param_ext_16089 = ctx_param_ext_tmp_17166;
        if (memblock_set(ctx, &mem_param_16065, &mem_param_tmp_17167,
                         "mem_param_tmp_17167") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16070, &mem_param_tmp_17168,
                         "mem_param_tmp_17168") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16075, &mem_param_tmp_17169,
                         "mem_param_tmp_17169") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16080, &mem_param_tmp_17170,
                         "mem_param_tmp_17170") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16085, &mem_param_tmp_17171,
                         "mem_param_tmp_17171") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_16090, &mem_param_tmp_17172,
                         "mem_param_tmp_17172") != 0)
            return 1;
        loopz2083U_15036 = loopz2083U_tmp_17173;
        loopz2084U_15037 = loopz2084U_tmp_17174;
        loop_while_15038 = loop_while_tmp_17175;
        if (memblock_unref(ctx, &mem_param_tmp_17172, "mem_param_tmp_17172") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_17171, "mem_param_tmp_17171") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_17170, "mem_param_tmp_17170") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_17169, "mem_param_tmp_17169") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_17168, "mem_param_tmp_17168") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_17167, "mem_param_tmp_17167") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_17043, "mem_17043") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17040, "mem_17040") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17037, "mem_17037") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17004, "mem_17004") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17001, "mem_17001") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16998, "mem_16998") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_16679, "mem_param_16679") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16736, "ext_mem_16736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_16467, "mem_param_16467") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_16462, "mem_param_16462") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16575, "ext_mem_16575") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16576, "ext_mem_16576") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16457, "mem_16457") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16325, "mem_16325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_16258, "mem_param_16258") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16315, "ext_mem_16315") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_16121, "mem_param_16121") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_16116, "mem_param_16116") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16229, "ext_mem_16229") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_16230, "ext_mem_16230") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_16111, "mem_16111") != 0)
            return 1;
    }
    ext_17115 = ctx_param_ext_16061;
    ext_17112 = ctx_param_ext_16064;
    ext_17111 = ctx_param_ext_16066;
    ext_17108 = ctx_param_ext_16069;
    ext_17107 = ctx_param_ext_16071;
    ext_17104 = ctx_param_ext_16074;
    ext_17103 = ctx_param_ext_16076;
    ext_17100 = ctx_param_ext_16079;
    ext_17099 = ctx_param_ext_16081;
    ext_17096 = ctx_param_ext_16084;
    ext_17095 = ctx_param_ext_16086;
    ext_17092 = ctx_param_ext_16089;
    if (memblock_set(ctx, &ext_mem_17091, &mem_param_16065,
                     "mem_param_16065") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_17090, &mem_param_16070,
                     "mem_param_16070") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_17089, &mem_param_16075,
                     "mem_param_16075") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_17088, &mem_param_16080,
                     "mem_param_16080") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_17087, &mem_param_16085,
                     "mem_param_16085") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_17086, &mem_param_16090,
                     "mem_param_16090") != 0)
        return 1;
    output_15027 = loopz2083U_15036;
    output_15028 = loopz2084U_15037;
    output_15029 = loop_while_15038;
    if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
        return 1;
    
    int64_t binop_y_17116 = (int64_t) 4 * output_15028;
    int64_t bytes_17117 = smax64((int64_t) 0, binop_y_17116);
    struct memblock mem_17118;
    
    mem_17118.references = NULL;
    if (memblock_alloc(ctx, &mem_17118, bytes_17117, "mem_17118")) {
        err = 1;
        goto cleanup;
    }
    if (output_15028 * (int64_t) 4 > 0)
        memmove(mem_17118.mem + (int64_t) 0, ext_mem_17088.mem + (int64_t) 0,
                output_15028 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
        return 1;
    
    struct memblock mem_17122;
    
    mem_17122.references = NULL;
    if (memblock_alloc(ctx, &mem_17122, bytes_17117, "mem_17122")) {
        err = 1;
        goto cleanup;
    }
    if (output_15028 * (int64_t) 4 > 0)
        memmove(mem_17122.mem + (int64_t) 0, ext_mem_17087.mem + (int64_t) 0,
                output_15028 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
        return 1;
    
    struct memblock mem_17126;
    
    mem_17126.references = NULL;
    if (memblock_alloc(ctx, &mem_17126, bytes_17117, "mem_17126")) {
        err = 1;
        goto cleanup;
    }
    if (output_15028 * (int64_t) 4 > 0)
        memmove(mem_17126.mem + (int64_t) 0, ext_mem_17086.mem + (int64_t) 0,
                output_15028 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_17151, &mem_17118, "mem_17118") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_17152, &mem_17122, "mem_17122") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_17153, &mem_17126, "mem_17126") != 0)
        return 1;
    prim_out_17154 = output_15028;
    (*mem_out_p_17294).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_17294, &mem_out_17151, "mem_out_17151") !=
        0)
        return 1;
    (*mem_out_p_17295).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_17295, &mem_out_17152, "mem_out_17152") !=
        0)
        return 1;
    (*mem_out_p_17296).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_17296, &mem_out_17153, "mem_out_17153") !=
        0)
        return 1;
    *out_prim_out_17297 = prim_out_17154;
    if (memblock_unref(ctx, &mem_17126, "mem_17126") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17122, "mem_17122") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17118, "mem_17118") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_16090, "mem_param_16090") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_16085, "mem_param_16085") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_16080, "mem_param_16080") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_16075, "mem_param_16075") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_16070, "mem_param_16070") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_16065, "mem_param_16065") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_17086, "ext_mem_17086") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_17087, "ext_mem_17087") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_17088, "ext_mem_17088") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_17089, "ext_mem_17089") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_17090, "ext_mem_17090") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_17091, "ext_mem_17091") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_16060, "mem_16060") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_17153, "mem_out_17153") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_17152, "mem_out_17152") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_17151, "mem_out_17151") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_16126);
    free(mem_16129);
    free(mem_16132);
    free(mem_16135);
    free(mem_16138);
    free(mem_16241);
    free(mem_16264);
    free(mem_16267);
    free(mem_16270);
    free(mem_16297);
    free(mem_16322);
    free(mem_16342);
    free(mem_16345);
    free(mem_16372);
    free(mem_16387);
    free(mem_16402);
    free(mem_16405);
    free(mem_16432);
    free(mem_16472);
    free(mem_16475);
    free(mem_16478);
    free(mem_16481);
    free(mem_16484);
    free(mem_16587);
    free(mem_16590);
    free(mem_16593);
    free(mem_16632);
    free(mem_16635);
    free(mem_16662);
    free(mem_16685);
    free(mem_16688);
    free(mem_16691);
    free(mem_16718);
    free(mem_16743);
    free(mem_16746);
    free(mem_16773);
    free(mem_16776);
    free(mem_16779);
    free(mem_16818);
    free(mem_16821);
    free(mem_16848);
    free(mem_16851);
    free(mem_16854);
    free(mem_16893);
    free(mem_16896);
    free(mem_16899);
    free(mem_16923);
    free(mem_16926);
    free(mem_16953);
    free(mem_16968);
    free(mem_17007);
    free(mem_17010);
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_i32_1d **out0,
                       struct futhark_i32_1d **out1,
                       struct futhark_i32_1d **out2, const
                       struct futhark_i32_1d *in0, const
                       struct futhark_i32_1d *in1, const
                       struct futhark_i32_1d *in2)
{
    struct memblock gridIds_mem_16056;
    
    gridIds_mem_16056.references = NULL;
    
    struct memblock pointIds_mem_16057;
    
    pointIds_mem_16057.references = NULL;
    
    struct memblock distances_mem_16058;
    
    distances_mem_16058.references = NULL;
    
    int64_t n_15021;
    struct memblock mem_out_17151;
    
    mem_out_17151.references = NULL;
    
    struct memblock mem_out_17152;
    
    mem_out_17152.references = NULL;
    
    struct memblock mem_out_17153;
    
    mem_out_17153.references = NULL;
    
    int64_t prim_out_17154;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    gridIds_mem_16056 = in0->mem;
    n_15021 = in0->shape[0];
    pointIds_mem_16057 = in1->mem;
    n_15021 = in1->shape[0];
    distances_mem_16058 = in2->mem;
    n_15021 = in2->shape[0];
    if (!(n_15021 == in0->shape[0] && (n_15021 == in1->shape[0] && n_15021 ==
                                       in2->shape[0]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_17151, &mem_out_17152,
                                &mem_out_17153, &prim_out_17154,
                                gridIds_mem_16056, pointIds_mem_16057,
                                distances_mem_16058, n_15021);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_17151;
            (*out0)->shape[0] = prim_out_17154;
            assert((*out1 =
                    (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
                NULL);
            (*out1)->mem = mem_out_17152;
            (*out1)->shape[0] = prim_out_17154;
            assert((*out2 =
                    (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
                NULL);
            (*out2)->mem = mem_out_17153;
            (*out2)->shape[0] = prim_out_17154;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
